import{__awaiter as e,__generator as n,__assign as r}from'./../../../ext/tslib/tslib.es6.js';import t from"path";import s from"fs";import{sortObject as c}from"../../../utils/helper.js";import{createFile as o}from"../../../utils/fs.js";import{TS_CONFIG as i,BABEL_RC as a,NEXT_CONFIG as u,SCRIPTS as f,RESOLUTIONS as l,DEV_ENV as p,PROD_ENV as g,DEV_DEPENDENCIES as d,DEPENDENCIES as v}from"./content.js";var b=function(){function b(){}return b.generate=function(r,t){return e(this,void 0,void 0,(function(){var e,s,c,o;return n(this,(function(n){switch(n.label){case 0:return[4,b.generateTsConfig(t)];case 1:return(o=n.sent())?[4,b.generateBabelRc(t)]:[3,3];case 2:o=n.sent(),n.label=3;case 3:return(c=o)?[4,b.generateNextConfig(t)]:[3,5];case 4:c=n.sent(),n.label=5;case 5:return(s=c)?[4,b.generatePackageJson(t)]:[3,7];case 6:s=n.sent(),n.label=7;case 7:return(e=s)?[4,b.generateEnv(r,t)]:[3,9];case 8:e=n.sent(),n.label=9;case 9:return[2,e]}}))}))},b.generateTsConfig=function(e){return o(e||process.cwd(),"tsconfig.json",i)},b.generateBabelRc=function(e){var n=t.join(e||process.cwd(),".babelrc");return!!s.existsSync(n)||o(e||process.cwd(),".babelrc",a)},b.generateNextConfig=function(e){return o(e||process.cwd(),"next.config.js",u)},b.generatePackageJson=function(i){return e(this,void 0,void 0,(function(){var e,a,u,p,g;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),e=t.join(i||process.cwd(),"package.json"),(a=s.readFileSync(e)).length?(u=JSON.parse(a.toString()),(p=function(e){var n="dev"===e?d:v,t="dev"===e?"devDependencies":"dependencies";u[t]&&"object"==typeof u[t]?u[t]=r(r({},u[t]),n):u[t]=n;var s=c(u[t]);u[t]=s})("dev"),p("normal"),u.scripts&&"object"==typeof u.scripts?u.scripts=r(r({},u.scripts),f):u.scripts=f,u.resolutions=r(r({},u.resolutions),l),[4,o(e,"",JSON.stringify(u,null,2))]):[3,2];case 1:return[2,n.sent()];case 2:return[3,4];case 3:return g=n.sent(),console.error(g),[2,!1];case 4:return[2]}}))}))},b.generateEnv=function(e,n){var r="dev"===e?p:g;return o(n||process.cwd(),".env",r)},b}();export{b as ConfigGenerator};
