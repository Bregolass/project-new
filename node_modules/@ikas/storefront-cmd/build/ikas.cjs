#!/usr/bin/env node
"use strict";var e=require("path"),n=require("fs"),t=require("@ikas/storefront-models"),o=require("lodash/uniq");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=s(e),r=s(n),i=s(o),c=function(){return c=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var s in n=arguments[t])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e},c.apply(this,arguments)};function p(e,n,t,o){return new(t||(t=Promise))((function(s,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function i(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?s(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,i)}c((o=o.apply(e,n||[])).next())}))}function u(e,n){var t,o,s,a,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,o&&(s=2&a[0]?o.return:a[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,a[1])).done)return s;switch(o=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){r.label=a[1];break}if(6===a[0]&&r.label<s[1]){r.label=s[1],s=a;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(a);break}s[2]&&r.ops.pop(),r.trys.pop();continue}a=n.call(e,r)}catch(e){a=[6,e],o=0}finally{t=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,m=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,h="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",d="[\\ud800-\\udfff]",g="["+h+"]",T="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",I="\\d+",k="[\\u2700-\\u27bf]",y="[a-z\\xdf-\\xf6\\xf8-\\xff]",C="[^\\ud800-\\udfff"+h+I+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",P="\\ud83c[\\udffb-\\udfff]",v="[^\\ud800-\\udfff]",b="(?:\\ud83c[\\udde6-\\uddff]){2}",E="[\\ud800-\\udbff][\\udc00-\\udfff]",N="[A-Z\\xc0-\\xd6\\xd8-\\xde]",x="(?:"+y+"|"+C+")",_="(?:"+N+"|"+C+")",L="(?:"+T+"|"+P+")"+"?",A="[\\ufe0e\\ufe0f]?"+L+("(?:\\u200d(?:"+[v,b,E].join("|")+")[\\ufe0e\\ufe0f]?"+L+")*"),S="(?:"+[k,b,E].join("|")+")"+A,O="(?:"+[v+T+"?",T,b,E,d].join("|")+")",w=RegExp("['’]","g"),D=RegExp(T,"g"),J=RegExp(P+"(?="+P+")|"+O+A,"g"),R=RegExp([N+"?"+y+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[g,N,"$"].join("|")+")",_+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[g,N+x,"$"].join("|")+")",N+"?"+x+"+(?:['’](?:d|ll|m|re|s|t|ve))?",N+"+(?:['’](?:D|LL|M|RE|S|T|VE))?",I,S].join("|"),"g"),U=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),j=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,B="object"==typeof l&&l&&l.Object===Object&&l,F="object"==typeof self&&self&&self.Object===Object&&self,G=B||F||Function("return this")();var M,V=(M={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"},function(e){return null==M?void 0:M[e]});function q(e){return U.test(e)}function W(e){return q(e)?function(e){return e.match(J)||[]}(e):function(e){return e.split("")}(e)}var X=Object.prototype.toString,Y=G.Symbol,z=Y?Y.prototype:void 0,Z=z?z.toString:void 0;function $(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==X.call(e)}(e))return Z?Z.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n}function H(e,n,t){var o=e.length;return t=void 0===t?o:t,!n&&t>=o?e:function(e,n,t){var o=-1,s=e.length;n<0&&(n=-n>s?0:s+n),(t=t>s?s:t)<0&&(t+=s),s=n>t?0:t-n>>>0,n>>>=0;for(var a=Array(s);++o<s;)a[o]=e[o+n];return a}(e,n,t)}function K(e){return null==e?"":$(e)}var Q,ee=(Q=function(e,n,t){return n=n.toLowerCase(),e+(t?te(K(n).toLowerCase()):n)},function(e){return function(e,n,t,o){var s=-1,a=e?e.length:0;for(o&&a&&(t=e[++s]);++s<a;)t=n(t,e[s],s,e);return t}(function(e,n,t){return e=K(e),void 0===(n=t?void 0:n)?function(e){return j.test(e)}(e)?function(e){return e.match(R)||[]}(e):function(e){return e.match(f)||[]}(e):e.match(n)||[]}(function(e){return(e=K(e))&&e.replace(m,V).replace(D,"")}(e).replace(w,"")),Q,"")});var ne,te=(ne="toUpperCase",function(e){var n=q(e=K(e))?W(e):void 0,t=n?n[0]:e.charAt(0),o=n?H(n,1).join(""):e.slice(1);return t[ne]()+o});var oe,se=(oe=ee)&&"object"==typeof oe&&"default"in oe?oe.default:oe;function ae(e){return Array.isArray(e)?e:void 0===e?[]:function(e){return function(e){return"object"==typeof e&&null!==e}(e)&&"number"==typeof e.length}(e)||e instanceof Set?Array.from(e):[e]}function re(e){return Array.isArray(e)?e:void 0===e?[]:function(e){return function(e){return"object"==typeof e&&null!==e}(e)&&"number"==typeof e.length}(e)?Array.prototype.slice.call(e):[e]}function ie(e,n){const t=[],o=re(arguments);return o.splice(0,2),re(e).forEach(((e,s)=>{let a=[];o.forEach((n=>{"function"==typeof n?a=a.concat(n(e)):a.push(n)})),n(e)&&t.push({index:s,replaceWithValue:a})})),t.reverse().forEach((n=>{const t=[n.index,1].concat(n.replaceWithValue);e.splice.apply(e,t)})),e}const ce={short:/^-([^\d-])$/,long:/^--(\S+)/,combinedShort:/^-[^\d-]{2,}$/,optEquals:/^(--\S+?)=(.*)/};class pe extends Array{load(e){if(this.clear(),e&&e!==process.argv)e=ae(e);else{e=process.argv.slice(0);const n=process.execArgv.some(de)?1:2;e.splice(0,n)}e.forEach((e=>this.push(String(e))))}clear(){this.length=0}expandOptionEqualsNotation(){if(this.some((e=>ce.optEquals.test(e)))){const e=[];this.forEach((n=>{const t=n.match(ce.optEquals);t?e.push(t[1],t[2]):e.push(n)})),this.clear(),this.load(e)}}expandGetoptNotation(){this.hasCombinedShortOptions()&&ie(this,ce.combinedShort,ue)}hasCombinedShortOptions(){return this.some((e=>ce.combinedShort.test(e)))}static from(e){const n=new this;return n.load(e),n}}function ue(e){return(e=e.slice(1)).split("").map((e=>"-"+e))}function le(e){return ce.optEquals.test(e)}function fe(e){return(ce.short.test(e)||ce.long.test(e))&&!ce.optEquals.test(e)}function me(e){return ce.short.test(e)?e.match(ce.short)[1]:function(e){return ce.long.test(e)&&!le(e)}(e)?e.match(ce.long)[1]:le(e)?e.match(ce.optEquals)[1].replace(/^--/,""):null}function he(e){return!(fe(e)||ce.combinedShort.test(e)||ce.optEquals.test(e))}function de(e){return["--eval","-e"].indexOf(e)>-1||e.startsWith("--eval=")}function ge(e){return"object"==typeof e&&null!==e}function Te(e){return void 0!==e}function Ie(e){return"function"==typeof e}var ke={isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isString:function(e){return"string"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isPlainObject:function(e){return null!==e&&"object"==typeof e&&e.constructor===Object},isArrayLike:function(e){return ge(e)&&"number"==typeof e.length},isObject:ge,isDefined:Te,isFunction:Ie,isClass:function(e){return!!Ie(e)&&/^class /.test(Function.prototype.toString.call(e))},isPrimitive:function(e){if(null===e)return!0;switch(typeof e){case"string":case"number":case"symbol":case"undefined":case"boolean":return!0;default:return!1}},isPromise:function(e){if(e){const n=Te(Promise)&&e instanceof Promise,t=e.then&&"function"==typeof e.then;return!(!n&&!t)}return!1},isIterable:function(e){return!(null===e||!Te(e))&&("function"==typeof e[Symbol.iterator]||"function"==typeof e[Symbol.asyncIterator])}};class ye{constructor(e){this.name=e.name,this.type=e.type||String,this.alias=e.alias,this.multiple=e.multiple,this.lazyMultiple=e.lazyMultiple,this.defaultOption=e.defaultOption,this.defaultValue=e.defaultValue,this.group=e.group;for(const n in e)this[n]||(this[n]=e[n])}isBoolean(){return this.type===Boolean||ke.isFunction(this.type)&&"Boolean"===this.type.name}isMultiple(){return this.multiple||this.lazyMultiple}static create(e){return new this(e)}}class Ce extends Array{validate(e){this.some((e=>!e.name))&&Pe("INVALID_DEFINITIONS","Invalid option definitions: the `name` property is required on each definition");let n;this.some((e=>e.type&&"function"!=typeof e.type))&&Pe("INVALID_DEFINITIONS","Invalid option definitions: the `type` property must be a setter fuction (default: `Boolean`)");this.some((e=>(n=e,ke.isDefined(e.alias)&&ke.isNumber(e.alias))))&&Pe("INVALID_DEFINITIONS","Invalid option definition: to avoid ambiguity an alias cannot be numeric [--"+n.name+" alias is -"+n.alias+"]");this.some((e=>(n=e,ke.isDefined(e.alias)&&1!==e.alias.length)))&&Pe("INVALID_DEFINITIONS","Invalid option definition: an alias must be a single character");this.some((e=>(n=e,"-"===e.alias)))&&Pe("INVALID_DEFINITIONS",'Invalid option definition: an alias cannot be "-"');be(this.map((n=>e?n.name.toLowerCase():n.name)))&&Pe("INVALID_DEFINITIONS","Two or more option definitions have the same name");be(this.map((n=>e&&ke.isDefined(n.alias)?n.alias.toLowerCase():n.alias)))&&Pe("INVALID_DEFINITIONS","Two or more option definitions have the same alias");this.filter((e=>!0===e.defaultOption)).length>1&&Pe("INVALID_DEFINITIONS","Only one option definition can be the defaultOption");this.some((e=>(n=e,e.isBoolean()&&e.defaultOption)))&&Pe("INVALID_DEFINITIONS",`A boolean option ["${n.name}"] can not also be the defaultOption.`)}get(e,n){if(fe(e)){if(ce.short.test(e)){const t=me(e);if(n){const e=t.toLowerCase();return this.find((n=>ke.isDefined(n.alias)&&n.alias.toLowerCase()===e))}return this.find((e=>e.alias===t))}{const t=me(e);if(n){const e=t.toLowerCase();return this.find((n=>n.name.toLowerCase()===e))}return this.find((e=>e.name===t))}}return this.find((n=>n.name===e))}getDefault(){return this.find((e=>!0===e.defaultOption))}isGrouped(){return this.some((e=>e.group))}whereGrouped(){return this.filter(ve)}whereNotGrouped(){return this.filter((e=>!ve(e)))}whereDefaultValueSet(){return this.filter((e=>ke.isDefined(e.defaultValue)))}static from(e,n){if(e instanceof this)return e;const t=super.from(ae(e),(e=>ye.create(e)));return t.validate(n),t}}function Pe(e,n){const t=new Error(n);throw t.name=e,t}function ve(e){return ae(e.group).some((e=>e))}function be(e){const n={};for(let t=0;t<e.length;t++){const o=e[t];if(n[o])return!0;ke.isDefined(o)&&(n[o]=!0)}}class Ee{constructor(e,n){this.options=Object.assign({},n),this.definitions=Ce.from(e,this.options.caseInsensitive),this.argv=pe.from(this.options.argv),this.argv.hasCombinedShortOptions()&&ie(this.argv,ce.combinedShort.test.bind(ce.combinedShort),(e=>(e=e.slice(1)).split("").map((n=>({origArg:`-${e}`,arg:"-"+n})))))}*[Symbol.iterator](){const e=this.definitions;let n,t,o,s,a,r=!1,i=!1;for(let c of this.argv){if(ke.isPlainObject(c)&&(a=c.origArg,c=c.arg),i&&this.options.stopAtFirstUnknown){yield{event:"unknown_value",arg:c,name:"_unknown",value:void 0};continue}if(fe(c))n=e.get(c,this.options.caseInsensitive),t=void 0,n?(t=!!n.isBoolean()||null,s="set"):s="unknown_option";else if(le(c)){const o=c.match(ce.optEquals);n=e.get(o[1],this.options.caseInsensitive),n?n.isBoolean()?(yield{event:"unknown_value",arg:c,name:"_unknown",value:t,def:n},s="set",t=!0):(s="set",t=o[2]):s="unknown_option"}else he(c)&&(n?(t=c,s="set"):(n=this.definitions.getDefault(),n&&!r?(t=c,s="set"):(s="unknown_value",n=void 0)));o=n?n.name:"_unknown";const p={event:s,arg:c,name:o,value:t,def:n};a&&(p.subArg=c,p.arg=a),yield p,"_unknown"===o&&(i=!0),n&&n.defaultOption&&!n.isMultiple()&&"set"===s&&(r=!0),n&&n.isBoolean()&&(n=void 0),n&&!n.multiple&&ke.isDefined(t)&&null!==t&&(n=void 0),t=void 0,s=void 0,o=void 0,a=void 0}}}const Ne=new WeakMap;class xe{constructor(e){this.definition=new ye(e),this.state=null,this.resetToDefault()}get(){return Ne.get(this)}set(e){this._set(e,"set")}_set(e,n){const t=this.definition;if(t.isMultiple()){if(null!=e){const o=this.get();"default"===this.state&&(o.length=0),o.push(t.type(e)),this.state=n}}else{if(!t.isMultiple()&&"set"===this.state){const n=new Error(`Singular option already set [${this.definition.name}=${this.get()}]`);throw n.name="ALREADY_SET",n.value=e,n.optionName=t.name,n}null==e?Ne.set(this,e):(Ne.set(this,t.type(e)),this.state=n)}}resetToDefault(){ke.isDefined(this.definition.defaultValue)?this.definition.isMultiple()?Ne.set(this,ae(this.definition.defaultValue).slice()):Ne.set(this,this.definition.defaultValue):this.definition.isMultiple()?Ne.set(this,[]):Ne.set(this,null),this.state="default"}static create(e){return(e=new ye(e)).isBoolean()?_e.create(e):new this(e)}}class _e extends xe{set(e){super.set(!0)}static create(e){return new this(e)}}class Le extends Map{constructor(e){super(),this.definitions=Ce.from(e),this.set("_unknown",xe.create({name:"_unknown",multiple:!0}));for(const e of this.definitions.whereDefaultValueSet())this.set(e.name,xe.create(e))}toObject(e){e=e||{};const n={};for(const t of this){const o=e.camelCase&&"_unknown"!==t[0]?se(t[0]):t[0],s=t[1];("_unknown"!==o||s.get().length)&&(n[o]=s.get())}return e.skipUnknown&&delete n._unknown,n}}class Ae extends Le{toObject(e){const n=super.toObject({skipUnknown:e.skipUnknown}),t=super.toObject(e),o=t._unknown;delete t._unknown;const s={_all:t};return o&&o.length&&(s._unknown=o),this.definitions.whereGrouped().forEach((t=>{const o=e.camelCase?se(t.name):t.name,a=n[t.name];for(const e of ae(t.group))s[e]=s[e]||{},ke.isDefined(a)&&(s[e][o]=a)})),this.definitions.whereNotGrouped().forEach((t=>{const o=e.camelCase?se(t.name):t.name,a=n[t.name];ke.isDefined(a)&&(s._none||(s._none={}),s._none[o]=a)})),s}}var Se=function(e,n){(n=n||{}).stopAtFirstUnknown&&(n.partial=!0),e=Ce.from(e,n.caseInsensitive);const t=new Ee(e,{argv:n.argv,stopAtFirstUnknown:n.stopAtFirstUnknown,caseInsensitive:n.caseInsensitive}),o=new(e.isGrouped()?Ae:Le)(e);for(const e of t){const t=e.subArg||e.arg;if(!n.partial){if("unknown_value"===e.event){const e=new Error(`Unknown value: ${t}`);throw e.name="UNKNOWN_VALUE",e.value=t,e}if("unknown_option"===e.event){const e=new Error(`Unknown option: ${t}`);throw e.name="UNKNOWN_OPTION",e.optionName=t,e}}let s;o.has(e.name)?s=o.get(e.name):(s=xe.create(e.def),o.set(e.name,s)),"_unknown"===e.name?s.set(t):s.set(e.value)}return o.toObject({skipUnknown:!n.partial,camelCase:n.camelCase})};function Oe(e,n){return p(this,void 0,void 0,(function(){return u(this,(function(t){try{return r.default.readdirSync(e).forEach((function(t){(null==n?void 0:n.includes(t))||r.default.unlinkSync(a.default.join(e,t))})),[2,!0]}catch(e){return[2,!1]}return[2]}))}))}function we(e,n,t){var o;return p(this,void 0,void 0,(function(){var s,i,c;return u(this,(function(p){try{return s=e,i=function(e){var n=e.split("/");return n.length>1?{dirParts:n.slice(0,n.length-1),filePart:n[n.length-1]}:{filePart:e}}(n),(null===(o=i.dirParts)||void 0===o?void 0:o.length)&&(s=a.default.join.apply(a.default,function(e,n,t){if(t||2===arguments.length)for(var o,s=0,a=n.length;s<a;s++)!o&&s in n||(o||(o=Array.prototype.slice.call(n,0,s)),o[s]=n[s]);return e.concat(o||Array.prototype.slice.call(n))}([s],i.dirParts,!1))),r.default.existsSync(s)||r.default.mkdirSync(s,{recursive:!0}),c=a.default.join(s,i.filePart),r.default.writeFileSync(c,t),[2,!0]}catch(e){return console.error(e),[2,!1]}return[2]}))}))}var De=[{content:'import { IkasLocalThemeAPI } from "@ikas/storefront-next";\n\nexport default IkasLocalThemeAPI.GetComponentDirs.getComponentDirs;\nexport const config = IkasLocalThemeAPI.GetComponentDirs.config;\n',fileName:"getComponentDirs.ts"},{content:'import { IkasLocalThemeAPI } from "@ikas/storefront-next";\n\nexport default IkasLocalThemeAPI.GetTheme.getTheme;\nexport const config = IkasLocalThemeAPI.GetTheme.config;\n',fileName:"getTheme.ts"},{content:'import { IkasLocalThemeAPI } from "@ikas/storefront-next";\n\nexport default IkasLocalThemeAPI.UpdateTheme.updateTheme;\nexport const config = IkasLocalThemeAPI.UpdateTheme.config;\n',fileName:"updateTheme.ts"},{content:'import { IkasLocalThemeAPI } from "@ikas/storefront-next";\n\nexport default IkasLocalThemeAPI.UploadTheme.uploadTheme;\nexport const config = IkasLocalThemeAPI.UploadTheme.config;\n',fileName:"uploadTheme.ts"},{content:'import { IkasLocalThemeAPI } from "@ikas/storefront-next";\n\nexport default IkasLocalThemeAPI.GetConfig.getConfig;\nexport const config = IkasLocalThemeAPI.GetConfig.config;\n',fileName:"getConfig.ts"}],Je=function(){function e(){}return e.generate=function(){return p(this,void 0,void 0,(function(){var n,t,o,s,r;return u(this,(function(i){switch(i.label){case 0:return[4,Oe(a.default.join(process.cwd(),"src","pages","api"))];case 1:i.sent(),n=!0,t=0,o=De,i.label=2;case 2:return t<o.length?(s=o[t],(r=n)?[4,e.generateAPI(s)]:[3,4]):[3,6];case 3:r=i.sent(),i.label=4;case 4:n=r,i.label=5;case 5:return t++,[3,2];case 6:return[2,n]}}))}))},e.generateAPI=function(e){return we(a.default.join(process.cwd(),"src","pages","api"),e.fileName,e.content)},e}();function Re(e,n){return Object.entries(e||{}).reduce((function(e,t){var o=t[0],s=t[1];return o===n?e.concat(s):"object"==typeof s?e.concat(Re(s,n)):e}),[])}var Ue={"@ikas/storefront":"^4.0.0","@ikas/storefront-peer-deps":"^4.0.0"},je={},Be={"@types/react":"17.0.2","@types/react-dom":"17.0.2"},Fe={upgradeDependencies:"yarn upgrade @ikas/storefront @ikas/storefront-peer-deps",dev:"next dev -p 3333",build:"next build",start:"next start",generate:"ikas --generate","prettier:all":"npx prettier@^2.1 './**/src/**/*.(ts|tsx|css|scss)' --write"},Ge=function(){function e(){}return e.generate=function(n,t){return p(this,void 0,void 0,(function(){var o,s,a,r;return u(this,(function(i){switch(i.label){case 0:return[4,e.generateTsConfig(t)];case 1:return(r=i.sent())?[4,e.generateBabelRc(t)]:[3,3];case 2:r=i.sent(),i.label=3;case 3:return(a=r)?[4,e.generateNextConfig(t)]:[3,5];case 4:a=i.sent(),i.label=5;case 5:return(s=a)?[4,e.generatePackageJson(t)]:[3,7];case 6:s=i.sent(),i.label=7;case 7:return(o=s)?[4,e.generateEnv(n,t)]:[3,9];case 8:o=i.sent(),i.label=9;case 9:return[2,o]}}))}))},e.generateTsConfig=function(e){return we(e||process.cwd(),"tsconfig.json",'{\n  "compilerOptions": {\n    "target": "esnext",\n    "lib": [\n      "dom",\n      "dom.iterable",\n      "esnext"\n    ],\n    "allowJs": true,\n    "skipLibCheck": true,\n    "strict": true,\n    "forceConsistentCasingInFileNames": true,\n    "experimentalDecorators": true,\n    "noEmit": true,\n    "esModuleInterop": true,\n    "module": "esnext",\n    "moduleResolution": "node",\n    "resolveJsonModule": true,\n    "isolatedModules": true,\n    "jsx": "preserve",\n    "baseUrl": ".",\n    "useUnknownInCatchVariables": false,\n    "incremental": true\n  },\n  "typeRoots": [\n    "./node_modules/@types"\n  ],\n  "include": [\n    "next-env.d.ts",\n    "**/*.ts",\n    "**/*.tsx",\n    "**/typings/global.d.ts",\n    "**/typings/*.ts",\n  ],\n  "exclude": [\n    "node_modules",\n    "./src/pages/api",\n  ]\n}')},e.generateBabelRc=function(e){var n=a.default.join(e||process.cwd(),".babelrc");return!!r.default.existsSync(n)||we(e||process.cwd(),".babelrc",'{\n  "presets": [\n    [\n      "next/babel",\n      {\n        "preset-react": { "throwIfNamespace": false },\n      }\n    ]\n  ],\n  "plugins": []\n}')},e.generateNextConfig=function(e){return we(e||process.cwd(),"next.config.js",'const withTM = require("next-transpile-modules")([\n  "@ikas/storefront",\n  "@ikas/storefront-api",\n  "@ikas/storefront-assets",\n  "@ikas/storefront-cmd",\n  "@ikas/storefront-config",\n  "@ikas/storefront-model-functions",\n  "@ikas/storefront-models",\n  "@ikas/storefront-next",\n  "@ikas/storefront-providers",\n]);\n\nconst config = {\n  i18n: {\n    defaultLocale: "en",\n    locales: ["en"],\n    localeDetection: false,\n  },\n  basePath: process.env.NEXTJS_BASE_PATH || "",\n\n  images: {\n    deviceSizes: [\n      180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 1950, 2560, 3840,\n    ],\n  },\n\n  webpack: (config, { buildId, dev, isServer, defaultLoaders, webpack }) => {\n    if (!isServer) {\n      config.resolve.fallback.fs = false;\n      config.resolve.fallback.net = false;\n      config.resolve.fallback.encoding = false;\n      config.resolve.fallback.crypto = false;\n      config.resolve.fallback.assert = false;\n      config.resolve.fallback.stream = false;\n      config.module.rules = [\n        ...config.module.rules,\n        {\n          test: /@ikas/i,\n          sideEffects: false,\n        },\n      ];\n    }\n    return config;\n  },\n};\n\nmodule.exports = withTM(config);')},e.generatePackageJson=function(e){return p(this,void 0,void 0,(function(){var n,t,o,s,i;return u(this,(function(p){switch(p.label){case 0:return p.trys.push([0,3,,4]),n=a.default.join(e||process.cwd(),"package.json"),(t=r.default.readFileSync(n)).length?(o=JSON.parse(t.toString()),(s=function(e){var n="dev"===e?je:Ue,t="dev"===e?"devDependencies":"dependencies";o[t]&&"object"==typeof o[t]?o[t]=c(c({},o[t]),n):o[t]=n;var s,a=(s=o[t],Object.keys(s).sort().reduce((function(e,n){return e[n]=s[n],e}),{}));o[t]=a})("dev"),s("normal"),o.scripts&&"object"==typeof o.scripts?o.scripts=c(c({},o.scripts),Fe):o.scripts=Fe,o.resolutions=c(c({},o.resolutions),Be),[4,we(n,"",JSON.stringify(o,null,2))]):[3,2];case 1:return[2,p.sent()];case 2:return[3,4];case 3:return i=p.sent(),console.error(i),[2,!1];case 4:return[2]}}))}))},e.generateEnv=function(e,n){var t="dev"===e?"NEXT_PUBLIC_ENV=local\nNEXT_PUBLIC_BASE_URL=https://api.myikas.dev/api/sf\nNEXT_PUBLIC_CDN_URL=https://cdn.myikas.dev/\nNEXT_PUBLIC_GQL_URL=https://api.myikas.dev/api/sf/graphql\nNEXT_PUBLIC_PARTNER_GQL_URL=https://api.myikas.dev/api/partners/graphql\n":"NEXT_PUBLIC_ENV=local\nNEXT_PUBLIC_BASE_URL=https://api.myikas.com/api/sf\nNEXT_PUBLIC_CDN_URL=https://cdn.myikas.com/\nNEXT_PUBLIC_GQL_URL=https://api.myikas.com/api/sf/graphql\nNEXT_PUBLIC_PARTNER_GQL_URL=https://api.myikas.com/api/partners/graphql\n";return we(n||process.cwd(),".env",t)},e}(),Me=function(){function e(){}return e.generate=function(e){return we(a.default.join(process.cwd(),"src","theme.json"),"",JSON.stringify(e,null,2))},e.generateInitialThemeJsonFile=function(){var n={pages:[],components:[],name:"My Theme",customData:[],settings:{colors:[],favicon:{id:null},fontFamily:{name:null,variants:null},stockPreference:t.IkasThemeJsonStockPreference.SHOW_ALL}};return n.pages.push({id:"1",components:[],canonicals:null,description:null,disableIndex:null,name:null,pageTitle:null,slug:null,specifications:[],type:t.IkasThemeJsonPageType.INDEX}),e.generate(n)},e.getTheme=function(){return p(this,void 0,void 0,(function(){var e,n;return u(this,(function(t){try{return e=a.default.join(process.cwd(),"src","theme.json"),[2,(n=r.default.readFileSync(e)).length?JSON.parse(n.toString()):null]}catch(e){console.error(e)}return[2]}))}))},e}(),Ve=[{path:"[slug]/index.tsx",pageComponentName:"SlugPage",pageTypes:[t.IkasThemeJsonPageType.PRODUCT,t.IkasThemeJsonPageType.CATEGORY,t.IkasThemeJsonPageType.BRAND],isDynamicSSG:!0},{path:"account/orders/[id].tsx",pageComponentName:"OrderDetailPage",pageTypes:[t.IkasThemeJsonPageType.ORDER_DETAIL],isSSR:!0},{path:"account/orders/index.tsx",pageComponentName:"OrdersPage",pageTypes:[t.IkasThemeJsonPageType.ORDERS]},{path:"account/addresses.tsx",pageComponentName:"AddressesPage",pageTypes:[t.IkasThemeJsonPageType.ADDRESSES]},{path:"account/favorite-products.tsx",pageComponentName:"FavoriteProductsPage",pageTypes:[t.IkasThemeJsonPageType.FAVORITE_PRODUCTS]},{path:"account/forgot-password.tsx",pageComponentName:"ForgotPasswordPage",pageTypes:[t.IkasThemeJsonPageType.FORGOT_PASSWORD]},{path:"account/activate.tsx",pageComponentName:"ActivateCustomerPage",pageTypes:[t.IkasThemeJsonPageType.ACTIVATE_CUSTOMER]},{path:"account/index.tsx",pageComponentName:"AccountPage",pageTypes:[t.IkasThemeJsonPageType.ACCOUNT]},{path:"account/login.tsx",pageComponentName:"LoginPage",pageTypes:[t.IkasThemeJsonPageType.LOGIN]},{path:"account/raffles.tsx",pageComponentName:"AccountRafflesPage",pageTypes:[t.IkasThemeJsonPageType.RAFFLE_ACCOUNT]},{path:"account/recover-password.tsx",pageComponentName:"RecoverPasswordPage",pageTypes:[t.IkasThemeJsonPageType.RECOVER_PASSWORD]},{path:"account/register.tsx",pageComponentName:"RegisterPage",pageTypes:[t.IkasThemeJsonPageType.REGISTER]},{path:"blog/[slug].tsx",pageComponentName:"BlogSlugPage",pageTypes:[t.IkasThemeJsonPageType.BLOG,t.IkasThemeJsonPageType.BLOG_CATEGORY],isDynamicSSG:!0},{path:"blog/index.tsx",pageComponentName:"BlogPage",pageTypes:[t.IkasThemeJsonPageType.BLOG_INDEX]},{path:"pages/[slug].tsx",pageComponentName:"CustomPage",pageTypes:[t.IkasThemeJsonPageType.CUSTOM],isDynamicSSG:!0},{path:"raffle/[slug].tsx",pageComponentName:"RafflePage",pageTypes:[t.IkasThemeJsonPageType.RAFFLE_DETAIL],isDynamicSSG:!0},{path:"raffle/index.tsx",pageComponentName:"RafflesPage",pageTypes:[t.IkasThemeJsonPageType.RAFFLE]},{path:"404.tsx",pageComponentName:"NotFoundPage",pageTypes:[t.IkasThemeJsonPageType.NOT_FOUND]},{path:"cart.tsx",pageComponentName:"CartPage",pageTypes:[t.IkasThemeJsonPageType.CART]},{path:"index.tsx",pageComponentName:"IndexPage",pageTypes:[t.IkasThemeJsonPageType.INDEX]},{path:"search.tsx",pageComponentName:"SearchPage",pageTypes:[t.IkasThemeJsonPageType.SEARCH]},{path:"checkout.tsx",pageComponentName:"CheckoutPage",pageTypes:[],isCheckout:!0},{path:"editor.tsx",pageComponentName:"EditorPage",pageTypes:[],isEditor:!0}],qe=function(){function e(){}return e.generate=function(n,t){return p(this,void 0,void 0,(function(){var o;return u(this,(function(s){switch(s.label){case 0:return[4,Oe(a.default.join(t||process.cwd(),"src","components","__generated__"))];case 1:return s.sent(),[4,e.generateAllPageComponentImportsFiles(n,t)];case 2:return(o=s.sent())?[4,e.generateAllComponentImportsFileForEditor(n,t)]:[3,4];case 3:o=s.sent(),s.label=4;case 4:return[2,o]}}))}))},e.generateAllPageComponentImportsFiles=function(n,t){return p(this,void 0,void 0,(function(){var o,s,a,r,i;return u(this,(function(c){switch(c.label){case 0:o=!0,s=0,a=Ve,c.label=1;case 1:return s<a.length?(r=a[s],(i=o)?[4,e.generatePageComponentImportsFileWithInfo(r,n,t)]:[3,3]):[3,5];case 2:i=c.sent(),c.label=3;case 3:o=i,c.label=4;case 4:return s++,[3,1];case 5:return[2,o]}}))}))},e.generatePageComponentImportsFileWithInfo=function(n,t,o){return p(this,void 0,void 0,(function(){var s,a,r,i;return u(this,(function(c){switch(c.label){case 0:if(n.isCheckout||n.isEditor)return[2,!0];c.label=1;case 1:return c.trys.push([1,3,,4]),s=t.components,a=[],n.pageTypes.forEach((function(e){var n=t.pages.filter((function(n){return n.type===e}));n.length&&n.forEach((function(e){var n,t=e.components;(null===(n=e.specifications)||void 0===n?void 0:n.length)&&e.specifications.forEach((function(e){t.push.apply(t,e.components)})),a.push.apply(a,t.map((function(e){return e.componentId}))),t.forEach((function(e){if(s.find((function(n){return n.id===e.componentId}))){var n=Re(e.propValues,"componentId");a.push.apply(a,n)}}))}))})),r=s.filter((function(e){return a.includes(e.id)&&"checkout"!==e.id})),[4,e.generateComponentImportsFile(r,n,o)];case 2:return[2,c.sent()];case 3:return i=c.sent(),console.error(i),[2,!1];case 4:return[2]}}))}))},e.generatePageComponentImportsFileWithType=function(n,o,s){if(n!==t.IkasThemeJsonPageType.CHECKOUT){try{var a=Ve.find((function(e){return e.pageTypes.includes(n)}));if(a)return e.generatePageComponentImportsFileWithInfo(a,o,s)}catch(e){console.error(e)}return!1}},e.generateComponentImportsFile=function(e,n,t){try{var o="";return e.filter((function(e){return"checkout"!==e.id})).forEach((function(e,n){o+="import Component".concat(n,' from "src/components/').concat(e.dir,'";\r\n')})),o+="\n  const Components = {\n    ".concat(e.map((function(e,n){return'"'.concat(e.id,'": Component').concat(n)})),"\n  };\n  "),o+="\r\n",o+="export default Components;",we(a.default.join(t||process.cwd(),"src","components","__generated__","pages"),n.path.replace("tsx","ts"),o)}catch(e){return console.error(e),!1}},e.generateAllComponentImportsFileForEditor=function(e,n){return p(this,void 0,void 0,(function(){var t,o,s;return u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t='import dynamic from "next/dynamic";\r\n',t+='import { IkasEditorComponentLoader } from "@ikas/storefront";\r\n',t+="\r\n",t+="\r\n",(o=e.components.filter((function(e){return"checkout"!==e.id}))).filter((function(e){return"checkout"!==e.id})).forEach((function(e,n){t+="const Component".concat(n,' = dynamic(() => import("../').concat(e.dir,'"), { loading: () => <IkasEditorComponentLoader /> });\r\n')})),t+="\r\n",t+="\nconst Components = {\n  ".concat(o.map((function(e,n){return'"'.concat(e.id,'": Component').concat(n)})),"\n};\n"),t+="\r\n",t+="export default Components;",[4,we(a.default.join(n||process.cwd(),"src","components","__generated__"),"editor.tsx",t)];case 1:return[2,r.sent()];case 2:return s=r.sent(),console.error(s),[2,!1];case 3:return[2]}}))}))},e.generateAllComponentImportsFile=function(e,n){return p(this,void 0,void 0,(function(){var t,o,s;return u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t="",(o=e.components.filter((function(e){return"checkout"!==e.id}))).filter((function(e){return"checkout"!==e.id})).forEach((function(e,n){t+="import Component".concat(n,' from "../').concat(e.dir,'";\r\n')})),t+="\r\n",t+="\nconst Components = {\n  ".concat(o.map((function(e,n){return'"'.concat(e.id,'": Component').concat(n)})),"\n};\n"),t+="\r\n",t+="export default Components;",[4,we(a.default.join(n||process.cwd(),"src","components","__generated__"),"index.tsx",t)];case 1:return[2,r.sent()];case 2:return s=r.sent(),console.error(s),[2,!1];case 3:return[2]}}))}))},e}(),We=function(){function e(){}return e.generate=function(n){return p(this,void 0,void 0,(function(){var t,o,s,r,i,c,p,l,f,m,h;return u(this,(function(u){switch(u.label){case 0:return[4,Oe(a.default.join(n||process.cwd(),"src","pages"),["_app.tsx","_document.tsx","api"])];case 1:u.sent(),t=!0,o=0,s=Ve,u.label=2;case 2:return o<s.length?(r=s[o],(i=t)?[4,e.generatePageWithInfo(r,n)]:[3,4]):[3,6];case 3:i=u.sent(),u.label=4;case 4:t=i,u.label=5;case 5:return o++,[3,2];case 6:return c=Ve.find((function(e){return e.isCheckout})),p=Ve.find((function(e){return e.isEditor})),c?[4,e.generatePageWithInfo(c,n)]:[3,8];case 7:return f=u.sent(),[3,9];case 8:f=!1,u.label=9;case 9:return l=f,p?[4,e.generatePageWithInfo(p,n)]:[3,11];case 10:return h=u.sent(),[3,12];case 11:h=!1,u.label=12;case 12:return m=h,[2,t&&l&&m]}}))}))},e.generatePageWithInfo=function(e,n){return p(this,void 0,void 0,(function(){var t,o,s,r,i,c,p,l,f;return u(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),t="",e.isCheckout?t='import { CheckoutPage } from "@ikas/storefront";\nimport { CheckoutPage as CheckoutPageNext } from "@ikas/storefront-next";\n\nexport default CheckoutPage.default;\nexport const getStaticProps = CheckoutPageNext.getStaticProps;\n':e.isEditor?t='import { EditorPage } from "@ikas/storefront";\nimport { EditorPage as EditorPageNext } from "@ikas/storefront-next";\nimport Components from "../components/__generated__/editor";\n\nconst PageComponent = EditorPage.default;\n\nconst Page = (props: any) => {\n  return <PageComponent components={Components} {...props} />;\n};\n\nexport default Page;\nexport const getStaticProps = EditorPageNext.getStaticProps;\n':(o=e.pageComponentName+"Next",s="import { ".concat(e.pageComponentName,' } from "@ikas/storefront";\r\n'),r="import { ".concat(e.pageComponentName," as ").concat(o,' } from "@ikas/storefront-next";\r\n'),i='import Components from "src/components/__generated__/pages/'.concat(e.path.replace(".tsx",""),'";\r\n'),c="\nconst PageComponent = ".concat(e.pageComponentName,".default;\n\nconst Page = (props: any) => {\n  return <PageComponent components={Components} {...props} />;\n};\n\nexport default Page;\r\n"),p=e.isDynamicSSG?"export const getStaticPaths = ".concat(o,".getStaticPaths;\r\n"):"",l=e.isSSR?"export const getServerSideProps = ".concat(o,".getServerSideProps;\r\n"):"export const getStaticProps = ".concat(o,".getStaticProps;\r\n"),t=s+r+i+c+p+l),[4,we(a.default.join(n||process.cwd(),"src","pages"),e.path,t)];case 1:return[2,u.sent()];case 2:return f=u.sent(),console.error(f),[2,!1];case 3:return[2]}}))}))},e.generatePageWithType=function(n){return p(this,void 0,void 0,(function(){var t;return u(this,(function(o){switch(o.label){case 0:return(t=Ve.find((function(e){return e.pageTypes.includes(n)})))?[4,e.generatePageWithInfo(t)]:[3,2];case 1:return[2,o.sent()];case 2:return[2,!1]}}))}))},e}(),Xe=function(){function e(){}return e.generate=function(n,t){return p(this,void 0,void 0,(function(){var o,s,r,c,p,l,f;return u(this,(function(u){switch(u.label){case 0:return[4,Oe(a.default.join(t||process.cwd(),"src","components","__generated__","types"))];case 1:u.sent(),o={content:"",imports:[],internalCustomDatas:[]},u.label=2;case 2:u.trys.push([2,5,,6]),n.customData.forEach((function(t){e.generateAllCustomDataTypes(t,o,n)})),s=0,r=0;do{s=o.internalCustomDatas.length,o.internalCustomDatas.forEach((function(t){e.generateAllCustomDataTypes(t,o,n)})),(r=o.internalCustomDatas.length)!==s&&(o.internalCustomDatas=o.internalCustomDatas.splice(s,r))}while(s!==r);return[4,Ye.generate(n,o)];case 3:return u.sent(),c=a.default.join(t||process.cwd(),"src","components","__generated__"),o.imports=i.default(o.imports),p="import {\r\n",o.imports.forEach((function(e){p+="\t".concat(e,",\r\n")})),l=(p+='} from "@ikas/storefront"\r\n\r\n')+o.content,[4,we(c,"types.ts",l)];case 4:return[2,u.sent()];case 5:return f=u.sent(),console.log(f),[2,!1];case 6:return[2]}}))}))},e.generateAllCustomDataTypes=function(n,o,s){var a=n.type===t.IkasThemeJsonComponentPropType.ENUM,r="export ".concat(a?"enum":"type"," ").concat(e.generateTypeName(n)).concat(a?"":" = ","{ \r\n"),i="};\r\n\r\n";n.type!==t.IkasThemeJsonComponentPropType.DYNAMIC_LIST&&n.type!==t.IkasThemeJsonComponentPropType.STATIC_LIST||!n.nestedData?n.type===t.IkasThemeJsonComponentPropType.ENUM&&n.enumOptions?(o.content+=r,n.enumOptions.forEach((function(e){var n=e.value;e.value&&!isNaN(parseInt(e.value))&&(n="_"+e.value),o.content+='\t"'.concat(n,'" = "').concat(null==e?void 0:e.value,'",'),o.content+="\r\n"})),o.content+=i):(o.content+=r,n.nestedData&&n.nestedData.forEach((function(n){e.genenateCustomDataType(n,o,s),o.content+="\r\n"})),o.content+=i):e.generateAllCustomDataTypes(n.nestedData[0],o,s)},e.genenateCustomDataType=function(n,o,s){var a=e.getType(n,o,s);n.key&&n.key[0].match(/^\d/)&&(n.key="_"+n.key),o.content+="\t".concat(n.key).concat(n.isRequired?"":"?",": ").concat(a).concat([t.IkasThemeJsonComponentPropType.DYNAMIC_LIST,t.IkasThemeJsonComponentPropType.STATIC_LIST].includes(n.type)?"[]":"").concat(n.type===t.IkasThemeJsonComponentPropType.ENUM?",":";")},e.getType=function(n,o,s){var a="";switch(n.type){case t.IkasThemeJsonComponentPropType.TEXT:case t.IkasThemeJsonComponentPropType.RICH_TEXT:case t.IkasThemeJsonComponentPropType.COLOR:a="string";break;case t.IkasThemeJsonComponentPropType.BOOLEAN:a="boolean";break;case t.IkasThemeJsonComponentPropType.IMAGE:a="IkasImage",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.IMAGE_LIST:a="IkasImage[]",o.imports.push("IkasImage");break;case t.IkasThemeJsonComponentPropType.LINK:a="IkasNavigationLink",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.LIST_OF_LINK:a="IkasNavigationLink[]",o.imports.push("IkasNavigationLink");break;case t.IkasThemeJsonComponentPropType.PRODUCT_DETAIL:a="IkasProduct",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.PRODUCT_LIST:a="IkasProductList",o.imports.push("IkasProductList");break;case t.IkasThemeJsonComponentPropType.PRODUCT_ATTRIBUTE:a="IkasAttributeDetail",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.PRODUCT_ATTRIBUTE_LIST:a="IkasAttributeList",o.imports.push("IkasAttributeList");break;case t.IkasThemeJsonComponentPropType.BRAND:a="IkasBrand",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.BRAND_LIST:a="IkasBrandList",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.CATEGORY:a="IkasCategory",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.CATEGORY_LIST:a="IkasCategoryList",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.CUSTOM:var r=s.customData.find((function(e){return e.id===n.customDataId}));r&&(a=e.generateTypeName(r));break;case t.IkasThemeJsonComponentPropType.COMPONENT:a="IkasComponentRenderer",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.COMPONENT_LIST:a="IkasComponentRenderer[]",o.imports.push("IkasComponentRenderer");break;case t.IkasThemeJsonComponentPropType.BLOG:a="IkasBlog",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.BLOG_LIST:a="IkasBlogList",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.BLOG_CATEGORY:a="IkasBlogCategory",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.BLOG_CATEGORY_LIST:a="IkasBlogCategoryList",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.RAFFLE:a="IkasRaffle",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.RAFFLE_LIST:a="IkasRaffleList",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.SLIDER:a="IkasSlider",o.imports.push(a);break;case t.IkasThemeJsonComponentPropType.ENUM:case t.IkasThemeJsonComponentPropType.OBJECT:a=e.generateTypeName(n),o.content.includes("export enum ".concat(a))||o.internalCustomDatas.push(n);break;case t.IkasThemeJsonComponentPropType.DYNAMIC_LIST:case t.IkasThemeJsonComponentPropType.STATIC_LIST:n.nestedData&&(n.nestedData[0].type===t.IkasThemeJsonComponentPropType.OBJECT||n.nestedData[0].type===t.IkasThemeJsonComponentPropType.ENUM?(a=e.generateTypeName(n.nestedData[0]),o.content.includes("export type ".concat(a))||o.internalCustomDatas.push(n.nestedData[0])):a=e.getType(n.nestedData[0],o,s))}return a},e.generateTypeName=function(e){if(e.typescriptName)return e.typescriptName;var n=e.name||"";return(n=(n=n.replace(/\s/g,"")).replace(/\W/g,""))[0].match(/^\d/)&&(n="_"+n),e.type===t.IkasThemeJsonComponentPropType.ENUM&&(n+="Enum"),n},e}(),Ye=function(){function e(){}return e.generate=function(n,t){return p(this,void 0,void 0,(function(){return u(this,(function(o){return n.components.forEach((function(o){o.props.length>0&&"checkout"!==o.id&&(t.content+="export type ".concat(e.generatePropTypeName(o),"Props = {\n"),o.props.forEach((function(o){t.content+="\t".concat(o.name).concat(o.isRequired?"":"?",": ").concat(e.getType(o,n,t),";\n")})),t.content+="};\r\n\r\n")})),[2]}))}))},e.getType=function(e,n,o){var s="";switch(e.type){case t.IkasThemeJsonComponentPropType.TEXT:case t.IkasThemeJsonComponentPropType.RICH_TEXT:case t.IkasThemeJsonComponentPropType.COLOR:s="string";break;case t.IkasThemeJsonComponentPropType.BOOLEAN:s="boolean";break;case t.IkasThemeJsonComponentPropType.IMAGE:s="IkasImage",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.IMAGE_LIST:s="IkasImage[]",o.imports.push("IkasImage");break;case t.IkasThemeJsonComponentPropType.LINK:s="IkasNavigationLink",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.LIST_OF_LINK:s="IkasNavigationLink[]",o.imports.push("IkasNavigationLink");break;case t.IkasThemeJsonComponentPropType.PRODUCT_DETAIL:s="IkasProduct",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.PRODUCT_LIST:s="IkasProductList",o.imports.push("IkasProductList");break;case t.IkasThemeJsonComponentPropType.PRODUCT_ATTRIBUTE:s="IkasAttributeDetail",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.PRODUCT_ATTRIBUTE_LIST:s="IkasAttributeList[]",o.imports.push("IkasAttributeList");break;case t.IkasThemeJsonComponentPropType.BRAND:s="IkasBrand",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.BRAND_LIST:s="IkasBrandList",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.CATEGORY:s="IkasCategory",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.CATEGORY_LIST:s="IkasCategoryList",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.CUSTOM:var a=n.customData.find((function(n){return n.id===e.customDataId}));a&&(s=Xe.getType(a,o,n),a.type!==t.IkasThemeJsonComponentPropType.DYNAMIC_LIST&&a.type!==t.IkasThemeJsonComponentPropType.STATIC_LIST||(s+="[]"));break;case t.IkasThemeJsonComponentPropType.COMPONENT:s="IkasComponentRenderer",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.COMPONENT_LIST:s="IkasComponentRenderer[]",o.imports.push("IkasComponentRenderer");break;case t.IkasThemeJsonComponentPropType.BLOG:s="IkasBlog",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.BLOG_LIST:s="IkasBlogList",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.BLOG_CATEGORY:s="IkasBlogCategory",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.BLOG_CATEGORY_LIST:s="IkasBlogCategoryList",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.RAFFLE:s="IkasRaffle",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.RAFFLE_LIST:s="IkasRaffleList",o.imports.push(s);break;case t.IkasThemeJsonComponentPropType.SLIDER:s="IkasSlider",o.imports.push(s)}return s},e.generatePropTypeName=function(e){if(""!==e.displayName){var n=(e.dir||"").split("-"),t="";return n.forEach((function(e,n){return t+=e.charAt(0).toUpperCase()+e.slice(1)})),t[0].match(/^\d/)&&(t="_"+t),t}},e}();function ze(e){return p(this,void 0,void 0,(function(){var n,t,o,s,a,r;return u(this,(function(i){switch(i.label){case 0:return[4,Me.getTheme()];case 1:return(n=i.sent())?[3,3]:[4,Me.generateInitialThemeJsonFile()];case 2:i.sent(),i.label=3;case 3:return[4,Me.getTheme()];case 4:return n=i.sent(),[4,Me.generate(n)];case 5:return(r=i.sent())?[4,qe.generate(n)]:[3,7];case 6:r=i.sent(),i.label=7;case 7:return(a=r)?[4,We.generate()]:[3,9];case 8:a=i.sent(),i.label=9;case 9:return(s=a)?[4,Je.generate()]:[3,11];case 10:s=i.sent(),i.label=11;case 11:return(o=s)?[4,Ge.generate(e)]:[3,13];case 12:o=i.sent(),i.label=13;case 13:return(t=o)?[4,Xe.generate(n)]:[3,15];case 14:t=i.sent(),i.label=15;case 15:return[2,t]}}))}))}!function(){p(this,void 0,void 0,(function(){var e,n;return u(this,(function(t){switch(t.label){case 0:return e=[{name:"generate",alias:"g",type:Boolean},{name:"dev",alias:"d",type:Boolean}],(n=Se(e)).generate?[4,ze(!!n.dev?"dev":"prod")]:[3,2];case 1:t.sent()?console.log("Project files generated successfully!"):console.log("Project files generate failed!"),t.label=2;case 2:return[2]}}))}))}();
