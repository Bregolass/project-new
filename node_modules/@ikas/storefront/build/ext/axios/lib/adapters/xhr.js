import e from"../utils.js";import{__require as r}from"../core/settle.js";import{__require as o}from"../helpers/cookies.js";import t from"../helpers/buildURL.js";import{__require as s}from"../core/buildFullPath.js";import{__require as n}from"../helpers/parseHeaders.js";import{__require as a}from"../helpers/isURLSameOrigin.js";import{__require as i}from"../core/createError.js";import u from"../defaults/transitional.js";import{__require as l}from"../cancel/Cancel.js";var d,p;function c(){if(p)return d;p=1;var c=e,m=r(),f=o(),g=t,h=s(),T=n(),v=a(),E=i(),_=u,b=l();return d=function(e){return new Promise((function(r,o){var t,s=e.data,n=e.headers,a=e.responseType;function i(){e.cancelToken&&e.cancelToken.unsubscribe(t),e.signal&&e.signal.removeEventListener("abort",t)}c.isFormData(s)&&delete n["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",d=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";n.Authorization="Basic "+btoa(l+":"+d)}var p=h(e.baseURL,e.url);function w(){if(u){var t="getAllResponseHeaders"in u?T(u.getAllResponseHeaders()):null,s={data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:t,config:e,request:u};m((function(e){r(e),i()}),(function(e){o(e),i()}),s),u=null}}if(u.open(e.method.toUpperCase(),g(p,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=w:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(w)},u.onabort=function(){u&&(o(E("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function(){o(E("Network Error",e,null,u)),u=null},u.ontimeout=function(){var r=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",t=e.transitional||_;e.timeoutErrorMessage&&(r=e.timeoutErrorMessage),o(E(r,e,t.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",u)),u=null},c.isStandardBrowserEnv()){var R=(e.withCredentials||v(p))&&e.xsrfCookieName?f.read(e.xsrfCookieName):void 0;R&&(n[e.xsrfHeaderName]=R)}"setRequestHeader"in u&&c.forEach(n,(function(e,r){void 0===s&&"content-type"===r.toLowerCase()?delete n[r]:u.setRequestHeader(r,e)})),c.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&u.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(t=function(e){u&&(o(!e||e&&e.type?new b("canceled"):e),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(t),e.signal&&(e.signal.aborted?t():e.signal.addEventListener("abort",t))),s||(s=null),u.send(s)}))},d}export{c as __require};
