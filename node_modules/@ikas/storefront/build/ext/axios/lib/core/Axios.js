import t from"../utils.js";import e from"../helpers/buildURL.js";import r from"./InterceptorManager.js";import o from"./dispatchRequest.js";import s from"./mergeConfig.js";import i from"../helpers/validator.js";var n=t,a=e,f=r,h=o,u=s,l=i,p=l.validators;function c(t){this.defaults=t,this.interceptors={request:new f,response:new f}}c.prototype.request=function(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},(e=u(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;void 0!==r&&l.assertOptions(r,{silentJSONParsing:p.transitional(p.boolean),forcedJSONParsing:p.transitional(p.boolean),clarifyTimeoutError:p.transitional(p.boolean)},!1);var o=[],s=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(s=s&&t.synchronous,o.unshift(t.fulfilled,t.rejected))}));var i,n=[];if(this.interceptors.response.forEach((function(t){n.push(t.fulfilled,t.rejected)})),!s){var a=[h,void 0];for(Array.prototype.unshift.apply(a,o),a=a.concat(n),i=Promise.resolve(e);a.length;)i=i.then(a.shift(),a.shift());return i}for(var f=e;o.length;){var c=o.shift(),d=o.shift();try{f=c(f)}catch(t){d(t);break}}try{i=h(f)}catch(t){return Promise.reject(t)}for(;n.length;)i=i.then(n.shift(),n.shift());return i},c.prototype.getUri=function(t){return t=u(this.defaults,t),a(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(t){c.prototype[t]=function(e,r){return this.request(u(r||{},{method:t,url:e,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(t){c.prototype[t]=function(e,r,o){return this.request(u(o||{},{method:t,url:e,data:r}))}}));var d=c;export{d as default};
