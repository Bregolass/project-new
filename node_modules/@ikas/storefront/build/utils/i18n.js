import{IkasStorefrontConfig as r}from"@ikas/storefront-config";import e from"lodash/get";import{findAllIndexes as t}from"./helper.js";function n(t,n){var a="common",u="",o=t.split(":");if(o.length>2)return t;2===o.length?(a=o[0],u=o[1]):u=o[0];var l=r.getTranslations()[a];if(!l)return t;var f=e(l,u);if(f){if(n){for(var s="",v=0,p=i(f);v<p.length;v++){var c=p[v];if(c.isVariable){var h=c.value.replace("{{","").replace("}}","").trim();n[h]?s+=n[h]:s+=c.value}else s+=c.value}return s}return f}return t}function a(){return{t:n}}function i(r){var e=[];if(!r)return e;for(var n=t(r,"{{"),a=t(r,"}}"),i=n.map((function(r,e){return{start:r,end:a[e]+1}})),u=function(r){return i.some((function(e){return e.start<=r&&e.end>=r}))},o="",l=!1,f=0;f<r.length;f++){var s=r.charAt(f);l?u(f)?o+=s:(e.push({isVariable:!0,value:o}),o=s,l=!1):u(f)?(e.push({isVariable:!1,value:o}),o=s,l=!0):o+=s,f===r.length-1&&e.push({isVariable:l,value:o})}return e}export{i as createTranslationInputData,a as useTranslation};
