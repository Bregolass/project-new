import{__extends as e,__assign as r}from'./../../ext/tslib/tslib.es6.js';import*as o from"react";import{makeObservable as t,computed as n}from"mobx";import{Observer as p}from"mobx-react-lite";import{IkasThemeJsonComponentPropType as i}from"@ikas/storefront-models";import{IkasStorefrontConfig as a}from"@ikas/storefront-config";import{IkasPageDataInit as s}from"../../page-data-init/index.js";import{IkasBaseStore as u}from"../../store/base.js";import"../../store/customer/index.js";import"../../store/cart/index.js";var l=function(l){function m(e){var r=l.call(this,e)||this;return r.state={hasError:!1},t(r,{hasNullValue:n,Component:n}),r}return e(m,l),m.getDerivedStateFromError=function(e){return console.error(e),{hasError:!0}},Object.defineProperty(m.prototype,"hasNullValue",{get:function(){var e=this.props.pageComponentPropValue,r=e.propValues;return e.component.props.some((function(o){if(o.isRequired){var t=(r||{})[o.name],n=null==e?void 0:e.component.props.find((function(e){return e.id===o.requiredPropId}));if(n){var p=(r||{})[n.name];if(n.type===i.BOOLEAN&&!p||n.type===i.CUSTOM&&p!==o.requiredEnumOptionValue)return!1}return null===t||null==t}}))},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"Component",{get:function(){var e=this.props.pageComponentPropValue,r=a.getCurrentPageComponents(),o=e.pageComponent;return r?r[o.componentId]:null},enumerable:!1,configurable:!0}),m.prototype.render=function(){var e=this;return o.createElement(p,null,(function(){var t=e.props,n=t.index,p=t.pageComponentPropValue,i=t.settings,a=e.Component,l=p.pageComponent,m=p.propValues;return a?e.state.hasError?null:o.createElement("div",{id:n+""},e.hasNullValue?null:o.createElement(a,r({key:l.id},m,{settings:i,store:u.getInstance(),pageSpecificData:s.pageSpecificData}))):(console.error("COMPONENT NOT FOUND!"),null)}))},m}(o.Component);export{l as ThemeComponent};
