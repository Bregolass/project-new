import{__awaiter as e,__generator as t}from'./../../../../ext/tslib/tslib.es6.js';import*as a from"react";import{observer as r}from"mobx-react-lite";import n,{isSupportedCountry as l,formatIncompletePhoneNumber as o,getCountryCallingCode as s,parseIncompletePhoneNumber as c}from"libphonenumber-js";import u from"./get-countries.js";import i from"./style.module.scss.js";var m=r((function(r){var m=r.defaultCountry,v=r.disabled,f=void 0!==v&&v,d=r.placeholder,g=r.value,p=r.onChange,b=a.useState([]),E=b[0],h=b[1],y=a.useState(m||"TR"),N=y[0],C=y[1],S=a.useState(""),F=S[0],j=S[1];a.useEffect((function(){x();var e=N;if(l(e)||(e="US"),g){var t=n(g);t&&t.country&&(e=t.country),j(o(g,e))}else k(e);C(e)}),[m]);var x=function(){return e(void 0,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return[4,u()];case 1:return e=t.sent(),h(e),[2]}}))}))},k=function(e){var t=s(e);j("+".concat(t))},w=function(e){return o(e,N)};return a.createElement(a.Fragment,null,a.createElement("div",{className:i.SelectFlag},a.createElement("div",{className:i.FlagContainer},a.createElement("div",{className:i.Flag},a.createElement("img",{className:i.FlagImage,alt:N,src:"https://cdn.myikas.com/sf/assets/flags/3x2/".concat(N,".svg")}),a.createElement("div",{className:i.Arrow})),a.createElement("select",{className:i.Select,value:N,onChange:function(e){if(e.target.value){var t=e.target.value;C(t),k(t)}},disabled:f},E.map((function(e){return a.createElement("option",{key:e.value,value:e.value},e.label)}))))),a.createElement("input",{type:"tel",autoComplete:"tel",className:i.Input,value:F,onChange:function(e){var t=E.find((function(t){var a;return t.value===(null===(a=n(e.target.value))||void 0===a?void 0:a.country)}));t&&C(t.value);var a=w(e.target.value);j(a),p(a?c(a):e.target.value)},placeholder:d,disabled:f}))}));export{m as PhoneNumberInput};
