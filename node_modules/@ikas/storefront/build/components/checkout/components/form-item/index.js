import*as e from"react";import{runInAction as t}from"mobx";import{observer as n}from"mobx-react-lite";import o,{FormItemType as r}from"./model.js";import a from"./caret-down.js";import l from"./style.module.scss.js";import"@ikas/storefront-config";import{useTranslation as u}from"../../../../utils/i18n.js";import i from"react-tooltip";import{PhoneNumberInput as c}from"../phone-number-input/index.js";var s=n((function(n){var a=u().t,s=e.useState((function(){return new o(n)})),d=s[0],E=s[1];return e.useEffect((function(){i.rebuild()}),[]),e.useEffect((function(){t((function(){d.type=n.type}))}),[n.type]),e.useEffect((function(){t((function(){d.inputType=n.inputType}))}),[n.inputType]),e.useEffect((function(){t((function(){d.value=n.value}))}),[n.value]),e.useEffect((function(){t((function(){d.options=n.options}))}),[n.options]),e.useEffect((function(){t((function(){d.label=n.label}))}),[n.label]),e.useEffect((function(){t((function(){d.hasError=n.hasError}))}),[n.hasError]),e.useEffect((function(){t((function(){d.errorText=n.errorText}))}),[n.errorText]),e.useEffect((function(){t((function(){d.errorText=n.errorText}))}),[n.errorText]),e.useEffect((function(){t((function(){d.textAreaPlaceholder=n.textAreaPlaceholder}))}),[n.textAreaPlaceholder]),e.useEffect((function(){t((function(){d.rightContent=n.rightContent}))}),[n.rightContent]),e.useEffect((function(){t((function(){d.disableResize=n.disableResize}))}),[n.disableResize]),e.useEffect((function(){t((function(){E(new o(n))}))}),[n.onChange]),e.useEffect((function(){!d.country&&n.currentCountryCode&&d.onCountryChange(n.currentCountryCode)}),[n.currentCountryCode]),e.createElement("div",{className:d.formItemStyle,style:n.style},e.createElement("div",{className:l.FormItemWrapper},e.createElement("div",{className:l.FormItemInputWrapper},e.createElement("label",{className:d.labelStyle},d.label),d.type===r.TEXT&&e.createElement(m,{vm:d,type:d.inputType,disabled:d.disabled,required:n.required,pattern:n.pattern,autocomplete:n.autocomplete,name:n.name}),d.type===r.TEL&&e.createElement(c,{key:n.currentCountryCode||"1",disabled:d.disabled,defaultCountry:n.currentCountryCode,placeholder:a("checkout-page:enterPhoneNumber"),value:d.value?d.value:"",onChange:d.onPhoneChange}),d.type===r.TEXT_AREA&&e.createElement(f,{vm:d}),d.type===r.SELECT&&e.createElement(p,{vm:d,autocomplete:n.autocomplete})),!!d.hasError&&e.createElement("div",{className:l.ErrorMsg},d.errorText||""),!!n.tooltipText&&e.createElement("div",{className:l.FormItemTooltipContainer,"data-tip":n.tooltipText,"data-event":"touchstart focus mouseover","data-event-off":"mouseout"},"?"),!!d.rightContent&&e.createElement("div",{className:l.RightContent},d.rightContent)))})),m=n((function(t){var n=t.vm,o=t.name,r=t.autocomplete,a=t.type,l=t.pattern,u=t.required,i=t.disabled;return e.createElement("input",{required:u,type:a||"text",name:o,pattern:l,disabled:i,autoComplete:r,inputMode:n.inputMode||"text",className:n.inputStyle,value:n.value,onChange:n.onValueChange})})),f=n((function(t){var n=t.vm;return e.createElement("textarea",{style:{resize:n.disableResize?"none":"initial"},value:n.value,disabled:n.disabled,onChange:n.onTextAreaValueChange,placeholder:n.textAreaPlaceholder||""})})),p=n((function(t){var n,o=t.vm,r=t.autocomplete;return e.createElement(e.Fragment,null,e.createElement("select",{className:o.inputStyle,disabled:o.disabled,autoComplete:r,onChange:o.onSelectChange},!o.value&&e.createElement("option",{selected:!0,disabled:!0,key:-1}),null===(n=o.options)||void 0===n?void 0:n.map((function(t,n){return e.createElement("option",{key:n+t.value,value:t.label,selected:o.value===t.value},t.label)}))),e.createElement("div",{className:l.ArrowContainer},e.createElement(a,null)))}));export{s as FormItem};
