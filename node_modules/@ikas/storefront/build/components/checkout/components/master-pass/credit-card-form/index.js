import e from"react";import{observer as a}from"mobx-react-lite";import t from"../svg/master-pass-by-master-card.js";import o from"../../../style.module.scss.js";import r from"./style.module.scss.js";import{createTranslationInputData as s,useTranslation as n}from"../../../../../utils/i18n.js";import{IkasStorefrontConfig as m}from"@ikas/storefront-config";import{Button as i}from"../../button/index.js";import{Checkbox as c}from"../../checkbox/index.js";import{FormItem as d}from"../../form-item/index.js";import{FormItemType as l}from"../../form-item/model.js";var u=a((function(a){var u=a.vm,p=n().t,C=m.getTranslations()["checkout-page"],v=e.useMemo((function(){var e,a;return s(null===(a=null===(e=null==C?void 0:C.masterPass)||void 0===e?void 0:e.creditCardForm)||void 0===a?void 0:a.checkboxLabel)}),[C]),P=e.useMemo((function(){return e.createElement("div",{className:r.CheckboxLabel},v.map((function(a,o){var s,n,m,i;return a.isVariable?"{{ link }}"===a.value?e.createElement("a",{key:o,className:r.MasterPassInfoLink,title:null===(n=null===(s=null==C?void 0:C.masterPass)||void 0===s?void 0:s.creditCardForm)||void 0===n?void 0:n.moreInformation,target:"_blank",href:"https://www.masterpassturkiye.com/TermsAndConditions.aspx"},null===(i=null===(m=null==C?void 0:C.masterPass)||void 0===m?void 0:m.creditCardForm)||void 0===i?void 0:i.checkboxLabelLink):e.createElement("span",{key:o,className:r.Logo},e.createElement(t,null)):e.createElement(e.Fragment,{key:o},a.value)})))}),[v]),M=u.mpVM.isSaveCardToMasterPassPhoneNumberInputDisabled?u.mpVM.saveCardToMasterPassPhoneNumberDisabledInputValue({withPlus:!0,store:u.store,checkout:u.checkout}):u.mpVM.saveCardToMasterPass.phoneNumber;return e.createElement("div",null,e.createElement(c,{label:P,value:u.mpVM.saveCardToMasterPass.isCheckboxChecked,onChange:u.mpVM.onSaveCardToMasterPassCheckedChange}),u.mpVM.saveCardToMasterPass.isCheckboxChecked&&e.createElement("div",{className:r.FormWrapper},e.createElement("div",{className:o.RowPB},e.createElement(d,{name:"masterPassCardName",type:l.TEXT,label:p("checkout-page:masterPass.creditCardForm.cardName"),value:u.mpVM.saveCardToMasterPass.cardName,onChange:u.mpVM.onSaveCardToMasterPassCardNameChange})),u.mpVM.isSaveCardToMasterPassPhoneNumberInputVisible&&e.createElement("div",{className:o.RowPB},e.createElement(d,{name:"masterPassPhoneNumber",autocomplete:"tel",type:l.TEL,currentCountryCode:u.store.currentCountryCode,disabled:u.mpVM.isSaveCardToMasterPassPhoneNumberInputDisabled,label:p("checkout-page:masterPass.creditCardForm.phoneNumber"),value:M,onChange:u.mpVM.onSaveCardToMasterPassPhoneNumberChange})),e.createElement(i,{style:{width:"100%"},text:p("checkout-page:masterPass.creditCardForm.button"),isDisabled:u.mpVM.isSendConfirmationButtonDisabled,isLoading:u.mpVM.saveCardToMasterPass.isSendConfirmationButtonPending,onClick:function(){if(!u.mpVM.saveCardToMasterPass.isSendConfirmationButtonPending&&(console.log("onSendConfirmationButtonClick 1"),u.checkout.selectedPaymentGateway&&(console.log("onSendConfirmationButtonClick 2"),u.cardData&&u.cardData.cardNumber&&u.cardData.expirationDate&&u.cardData.cvv&&(console.log("onSendConfirmationButtonClick 3"),u.mpVM.saveCardToMasterPass.cardName)))){console.log("onSendConfirmationButtonClick 4");var e=u.mpVM.isSaveCardToMasterPassPhoneNumberInputDisabled?u.mpVM.saveCardToMasterPassPhoneNumberDisabledInputValue({withPlus:!1,store:u.store,checkout:u.checkout}):u.mpVM.saveCardToMasterPass.phoneNumber.replace("+","");if(e){var a,t,o,r,s={creditCard:{rtaPan:u.cardData.cardNumber.replace(/ /g,""),expiryDate:(a=u.cardData.expirationDate,t=a.replace(" / ",""),o=t.substring(0,2),r=t.substring(2,4),"".concat(r).concat(o)),cvc:u.cardData.cvv,accountAliasName:u.mpVM.saveCardToMasterPass.cardName,phoneNumber:e},store:u.store,checkout:u.checkout,paymentGateway:u.checkout.selectedPaymentGateway,callback:function(){u.mpVM.saveCardToMasterPass.isSendConfirmationButtonPending=!1}};console.log("onSendConfirmationButtonClick 5",s),u.mpVM.saveCardToMasterPass.isSendConfirmationButtonPending=!0,u.mpVM.onSaveCardToMasterPassSendConfirmationButtonClick(s)}}}})))}));export{u as default};
