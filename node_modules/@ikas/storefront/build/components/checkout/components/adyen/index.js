import{__awaiter as e,__generator as n}from'./../../../../ext/tslib/tslib.es6.js';import*as t from"react";import{observer as o}from"mobx-react-lite";import s from"@adyen/adyen-web";import"@adyen/adyen-web/dist/adyen.css";import r from"./adyen.module.scss.js";var i;!function(e){e.Authorised="Authorised",e.Cancelled="Cancelled"}(i||(i={}));var a=o((function(o){var a=o.vm,d=t.useRef(null);return t.useEffect((function(){e(void 0,void 0,void 0,(function(){var t,o,r;return n(this,(function(u){switch(u.label){case 0:return a.adyenResponse&&d.current?(t={environment:"test",clientKey:a.adyenResponse.clientKey,analytics:{enabled:!0},session:{id:a.adyenResponse.sessionId,sessionData:a.adyenResponse.sessionData},beforeSubmit:function(t,o,s){return e(void 0,void 0,void 0,(function(){return n(this,(function(e){return s.resolve(t),[2]}))}))},onPaymentCompleted:function(e,n){e.resultCode===i.Authorised&&a.adyenResponse?window.location.href="".concat(a.adyenResponse.returnUrl,"&redirectResult=").concat(e.sessionData):(a.isStepLoading=!1,setTimeout((function(){r.setStatus("ready")}),3e3))},onError:function(e,n){a.isStepLoading=!1,setTimeout((function(){r.setStatus("ready")}),3e3)},paymentMethodsConfiguration:{card:{showPayButton:!1}}},[4,s(t)]):[3,2];case 1:o=u.sent(),r=o.create("dropin").mount(d.current),a.setAdyenDropinElement(r),u.label=2;case 2:return[2]}}))}))}),[a.adyenResponse]),a.adyenResponse?t.createElement("div",{className:r.AdyenContainer},t.createElement("div",{ref:d})):null}));export{a as Adyen};
