import{__awaiter as e,__generator as t}from'./../../../../ext/tslib/tslib.es6.js';import*as n from"react";import{observer as r}from"mobx-react-lite";import{PayPalScriptProvider as a,usePayPalScriptReducer as o,PayPalButtons as i}from"@paypal/react-paypal-js";import l from"../../../../store/checkout/index.js";import c from"./style.module.scss.js";var s=r((function(r){var s=r.vm;if(!s.payPalClientIdResponse)return null;var d={"client-id":s.payPalClientIdResponse.clientId,currency:s.checkout.currencyCode,"merchant-id":s.payPalClientIdResponse.merchantId};return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(a,{options:d},n.createElement((function(){return o()[0].isPending?n.createElement("div",{className:c.Main},n.createElement("div",{className:c.loader})):n.createElement(i,{style:{layout:"horizontal"},onClick:function(e,t){return s.checkPaypalButtonAvailable()?t.resolve():t.reject()},onCancel:function(e,t){s.isStepLoading=!1},createOrder:function(n,r){return e(void 0,void 0,void 0,(function(){var e,n,r;return t(this,(function(t){switch(t.label){case 0:return[4,s.onCompletePaymentClick()];case 1:return t.sent(),[4,l.createPayPalOrder({input:{cartId:s.checkout.id,paymentGatewayId:(null===(n=s.checkout.selectedPaymentGateway)||void 0===n?void 0:n.id)||""}})];case 2:return(e=t.sent()).data&&(s.paypalOrderResponse=e.data),[2,e&&(null===(r=e.data)||void 0===r?void 0:r.sessionToken)||""]}}))}))},onApprove:function(n,r){return e(void 0,void 0,void 0,(function(){return t(this,(function(e){return s.paypalOrderResponse&&(window.location.href="".concat(s.paypalOrderResponse.returnUrl)),[2]}))}))}})}),null))))}));export{s as PayPal};
