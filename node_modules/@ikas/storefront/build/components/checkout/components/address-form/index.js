import{__assign as e}from'./../../../../ext/tslib/tslib.es6.js';import*as r from"react";import{observer as t}from"mobx-react-lite";import{IkasCheckoutRequirement as a}from"@ikas/storefront-models";import{FormItem as o}from"../form-item/index.js";import{FormItemType as l,FormItemInputMode as n}from"../form-item/model.js";import i from"./model.js";import{Checkbox as s}from"../checkbox/index.js";import"@ikas/storefront-config";import{useTranslation as d}from"../../../../utils/i18n.js";import{AddressFormItem as u,BillingFormItem as c}from"@ikas/localized-address";import v from"../../styles/common.module.scss.js";import m from"../../style.module.scss.js";var E=t((function(t){var a=r.useMemo((function(){return new i(e({},t))}),[]);return r.useEffect((function(){Object.entries(t).forEach((function(e){a[e[0]]=e[1]}))}),Object.values(t)),"in-store"===t.deliveryMethod?r.createElement(p,{props:t,vm:a}):r.createElement(h,{props:t,vm:a})})),p=t((function(t){var o=t.props,l=t.vm;return d().t,r.createElement("div",null,r.createElement("div",{className:[v.Grid,v.Grid2].join(" ")},r.createElement(f,e({},o,{vm:l})),r.createElement(g,e({},o,{vm:l})),r.createElement("div",null)," "),!!l.address.checkoutSettings&&l.address.checkoutSettings.phoneRequirement!==a.INVISIBLE&&r.createElement("div",{className:m.RowPB},r.createElement(S,e({},o,{vm:l})),r.createElement("div",null)," "))})),h=t((function(t){var a,o,l,n=t.props,i=t.vm,E=d().t,p=function(t){var a=t.map((function(t){return function(t){switch(t){case u.FIRSTNAME:return r.createElement(f,e({},n,{vm:i}));case u.LASTNAME:return r.createElement(g,e({},n,{vm:i}));case u.IDENTITY_NUMBER:return r.createElement(b,e({},n,{vm:i}));case u.ADDRESS_LINE_1:return r.createElement(T,e({},n,{vm:i}));case u.ADDRESS_LINE_2:return r.createElement(y,e({},n,{vm:i}));case u.POSTAL_CODE:return r.createElement(N,e({},n,{vm:i}));case u.COUNTRY:return r.createElement(L,e({},n,{vm:i}));case u.STATE:return r.createElement(k,e({},n,{vm:i}));case u.CITY:return i.address.isFreeTextCity?r.createElement(R,e({},n,{vm:i})):r.createElement(x,e({},n,{vm:i}));case u.DISTRICT:return i.address.isFreeTextDistrict?r.createElement(O,e({},n,{vm:i})):r.createElement(I,e({},n,{vm:i}));case u.PHONE:return r.createElement(S,e({},n,{vm:i}));default:return null}}(t)}));return r.createElement(r.Fragment,null,1===t.length&&r.createElement("div",{className:m.RowPB},a),2===t.length&&r.createElement("div",{className:[v.Grid,v.Grid2].join(" ")},a,r.createElement("div",null)," "),3===t.length&&r.createElement("div",{className:[v.Grid,v.Grid2,v.Grid3].join(" ")},a,r.createElement("div",null)," "))},h=function(t){var a=t.map((function(t){return function(t){switch(t){case c.COMPANY:return r.createElement(j,e({},n,{vm:i}));case c.TAX_NUMBER:return r.createElement(X,e({},n,{vm:i}));case c.TAX_OFFICE:return r.createElement(A,e({},n,{vm:i}));default:return null}}(t)}));return r.createElement(r.Fragment,null,1===t.length&&r.createElement("div",{className:m.RowPB},a),2===t.length&&r.createElement("div",{className:[v.Grid,v.Grid2].join(" ")},a,r.createElement("div",null)," "),3===t.length&&r.createElement("div",{className:[v.Grid,v.Grid2,v.Grid3].join(" ")},a,r.createElement("div",null)," "))};return r.createElement("div",null,i.allowTitleChange&&r.createElement("div",{className:m.RowPB},r.createElement(C,e({},n,{vm:i}))),i.countryOptions.length<=1?null===(a=i.address.addressFormatIgnoreCountry)||void 0===a?void 0:a.map((function(e){return p(e)})):null===(o=i.address.addressFormat)||void 0===o?void 0:o.map((function(e){return p(e)})),!!i.allowCorporateInfo&&r.createElement("div",{style:{marginTop:"12px"}},r.createElement(s,{value:i.isCorporate,label:E("checkout-page:corporateInvoice"),onChange:i.onCorporateChange})),!!i.isCorporate&&(null===(l=i.address.billingFormat)||void 0===l?void 0:l.map((function(e){return h(e)}))))})),f=t((function(e){var t,a,n,i=e.vm,s=d().t;return r.createElement(o,{type:l.TEXT,label:(null===(a=null===(t=i.address.fieldLabels)||void 0===t?void 0:t.firstName)||void 0===a?void 0:a.label)||s("checkout-page:firstName"),autocomplete:"given-name",value:i.firstName||"",onChange:i.onFirstNameChange,hasError:i.isErrorsVisible&&(null===(n=i.address.validationResults)||void 0===n?void 0:n.firstName.hasError),errorText:s("checkout-page:firstNameError")})})),g=t((function(e){var t,a,n,i=e.vm,s=d().t;return r.createElement(o,{type:l.TEXT,label:(null===(a=null===(t=i.address.fieldLabels)||void 0===t?void 0:t.lastName)||void 0===a?void 0:a.label)||s("checkout-page:lastName"),autocomplete:"family-name",value:i.lastName||"",onChange:i.onLastNameChange,hasError:i.isErrorsVisible&&(null===(n=i.address.validationResults)||void 0===n?void 0:n.lastName.hasError),errorText:s("checkout-page:lastNameError")})})),b=t((function(e){var t,a,n,i=e.vm,s=d().t;return r.createElement(o,{type:l.TEXT,label:(null===(a=null===(t=i.address.fieldLabels)||void 0===t?void 0:t.identityNumber)||void 0===a?void 0:a.label)||s("checkout-page:identityNumber"),value:i.identityNumber||"",onChange:i.onIdentityNumberChange,hasError:i.isErrorsVisible&&(null===(n=i.address.validationResults)||void 0===n?void 0:n.identityNumber.hasError),errorText:s("checkout-page:identityNumberError")})})),C=t((function(e){var t=e.vm,a=d().t,n=t.address;return r.createElement(o,{type:l.TEXT,label:a("checkout-page:addressTitle"),value:n.title||"",onChange:t.onAddressTitleChange,hasError:t.isErrorsVisible&&!n.title,errorText:a("checkout-page:addressTitleError")})})),T=t((function(e){var t,a,n,i=e.vm,s=d().t;return r.createElement(o,{type:l.TEXT,label:(null===(a=null===(t=i.address.fieldLabels)||void 0===t?void 0:t.addressLine1)||void 0===a?void 0:a.label)||s("checkout-page:addressLine1"),autocomplete:"address-line1",value:i.address.addressLine1||"",onChange:i.onAddressLine1Change,hasError:i.isErrorsVisible&&(null===(n=i.address.validationResults)||void 0===n?void 0:n.addressLine1.hasError),errorText:s("checkout-page:addressError")})})),y=t((function(e){var t,a,n=e.vm,i=d().t;return r.createElement(o,{type:l.TEXT,autocomplete:"address-line2",label:(null===(a=null===(t=n.address.fieldLabels)||void 0===t?void 0:t.addressLine2)||void 0===a?void 0:a.label)||i("checkout-page:addressLine2"),value:n.address.addressLine2||"",onChange:n.onAddressLine2Change})})),N=t((function(e){var t,a,n,i=e.vm,s=d().t;return r.createElement(o,{type:l.TEXT,label:(null===(a=null===(t=i.address.fieldLabels)||void 0===t?void 0:t.postalCode)||void 0===a?void 0:a.label)||s("checkout-page:postalCode"),autocomplete:"postal-code",value:i.address.postalCode||"",onChange:i.onAddressPostalCodeChange,hasError:i.isErrorsVisible&&(null===(n=i.address.validationResults)||void 0===n?void 0:n.postalCode.hasError),errorText:s("checkout-page:postalCodeError")})})),L=t((function(e){var t,a,n,i,s=e.vm,u=d().t;return s.countryOptions.length<=1?null:r.createElement(o,{type:l.SELECT,label:(null===(a=null===(t=s.address.fieldLabels)||void 0===t?void 0:t.country)||void 0===a?void 0:a.label)||u("checkout-page:country"),autocomplete:"country-name",value:(null===(n=s.country)||void 0===n?void 0:n.id)||"",onChange:s.onCountryChange,options:s.countryOptions,hasError:s.isErrorsVisible&&(null===(i=s.address.validationResults)||void 0===i?void 0:i.country.hasError),errorText:u("checkout-page:countryError")})})),k=t((function(e){var t,a,n,i,s=e.vm,u=d().t;return r.createElement(o,{type:l.SELECT,label:(null===(a=null===(t=s.address.fieldLabels)||void 0===t?void 0:t.state)||void 0===a?void 0:a.label)||u("checkout-page:state"),value:(null===(n=s.state)||void 0===n?void 0:n.id)||"",onChange:s.onStateChange,options:s.stateOptions,hasError:s.isErrorsVisible&&(null===(i=s.address.validationResults)||void 0===i?void 0:i.state.hasError),errorText:u("checkout-page:stateError")})})),x=t((function(e){var t,a,n,i,s=e.vm,u=d().t;return r.createElement(o,{type:l.SELECT,label:(null===(a=null===(t=s.address.fieldLabels)||void 0===t?void 0:t.city)||void 0===a?void 0:a.label)||u("checkout-page:city"),autocomplete:"off",value:(null===(n=s.city)||void 0===n?void 0:n.id)||"",onChange:s.onCityChange,options:s.cityOptions,hasError:s.isErrorsVisible&&(null===(i=s.address.validationResults)||void 0===i?void 0:i.city.hasError),errorText:u("checkout-page:cityError")})})),R=t((function(e){var t,a,n,i,s=e.vm,u=d().t;return r.createElement(o,{type:l.TEXT,autocomplete:"address-level2",label:(null===(a=null===(t=s.address.fieldLabels)||void 0===t?void 0:t.city)||void 0===a?void 0:a.label)||u("checkout-page:city"),value:(null===(n=s.city)||void 0===n?void 0:n.name)||"",hasError:s.isErrorsVisible&&(null===(i=s.address.validationResults)||void 0===i?void 0:i.city.hasError),onChange:s.onCityInputChange,errorText:u("checkout-page:cityError")})})),I=t((function(e){var t,a,n,i,s=e.vm,u=d().t;return r.createElement(o,{type:l.SELECT,label:(null===(a=null===(t=s.address.fieldLabels)||void 0===t?void 0:t.district)||void 0===a?void 0:a.label)||u("checkout-page:district"),autocomplete:"off",value:(null===(n=s.district)||void 0===n?void 0:n.id)||"",onChange:s.onDistrictChange,options:s.districtOptions,hasError:s.isErrorsVisible&&(null===(i=s.address.validationResults)||void 0===i?void 0:i.district.hasError),errorText:u("checkout-page:districtError")})})),O=t((function(e){var t,a,n,i=e.vm,s=d().t;return r.createElement(o,{type:l.TEXT,autocomplete:"address-level3",label:(null===(a=null===(t=i.address.fieldLabels)||void 0===t?void 0:t.district)||void 0===a?void 0:a.label)||s("checkout-page:district"),value:(null===(n=i.district)||void 0===n?void 0:n.name)||"",onChange:i.onDistrictInputChange})})),S=t((function(e){var t,a,i,s,u=e.vm,c=d().t;return r.createElement(o,{type:l.TEL,inputMode:n.TEL,label:(null===(a=null===(t=u.address.fieldLabels)||void 0===t?void 0:t.phone)||void 0===a?void 0:a.label)||c("checkout-page:phone"),autocomplete:"tel",value:u.phone||"",onChange:u.onPhoneChange,hasError:u.isErrorsVisible&&(null===(i=u.address.validationResults)||void 0===i?void 0:i.phone.hasError),currentCountryCode:(null===(s=u.address.country)||void 0===s?void 0:s.iso2)||u.myCountryCode,errorText:c("checkout-page:phoneError")})})),j=t((function(e){var t,a,n=e.vm,i=d().t;return r.createElement(o,{type:l.TEXT,label:(null===(a=null===(t=n.address.fieldLabels)||void 0===t?void 0:t.company)||void 0===a?void 0:a.label)||i("checkout-page:companyName"),value:n.address.company||"",onChange:n.onCompanyChange})})),A=t((function(e){var t,a,n,i=e.vm,s=d().t;return r.createElement(o,{type:l.TEXT,label:(null===(a=null===(t=i.address.fieldLabels)||void 0===t?void 0:t.taxOffice)||void 0===a?void 0:a.label)||s("checkout-page:taxOffice"),value:(null===(n=i.address)||void 0===n?void 0:n.taxOffice)||"",onChange:i.onTaxOfficeChange})})),X=t((function(e){var t,a,n,i=e.vm,s=d().t;return r.createElement(o,{type:l.TEXT,label:(null===(a=null===(t=i.address.fieldLabels)||void 0===t?void 0:t.taxNumber)||void 0===a?void 0:a.label)||s("checkout-page:taxNumber"),value:(null===(n=i.address)||void 0===n?void 0:n.taxNumber)||"",onChange:i.onTaxNumberChange})}));export{E as AddressForm};
