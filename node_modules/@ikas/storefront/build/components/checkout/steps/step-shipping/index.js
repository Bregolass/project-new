import*as e from"react";import{observer as t}from"mobx-react-lite";import"@ikas/storefront-config";import{formatCurrency as c}from"../../../../utils/currency.js";import{useTranslation as o}from"../../../../utils/i18n.js";import n from"./style.module.scss.js";import{Button as i}from"../../components/button/index.js";import{Checkbox as r}from"../../components/checkbox/index.js";import{FormItemType as a}from"../../components/form-item/model.js";import{FormItem as m}from"../../components/form-item/index.js";import s from"../../components/error/index.js";import p from"../../components/select-box/index.js";var u=t((function(t){var c=t.vm,r=o().t;return e.createElement("div",{className:[n.StepShipping].join(" ")},e.createElement(l,{vm:c}),e.createElement(g,{vm:c}),e.createElement(i,{style:{width:"100%",marginTop:"32px"},text:r("checkout-page:actions.continueWithPayment"),isLoading:c.isStepLoading,onClick:c.onProceedToPaymentClick}))})),l=t((function(t){var i,r=t.vm,a=o().t;return e.createElement("div",{className:[n.InfoBox,r.isChangingShippingMethod?n.Dimmed:""].join(" ")},e.createElement(s,{vm:r}),null===(i=r.checkout.availableShippingMethods)||void 0===i?void 0:i.map((function(t,o){return e.createElement(p,{key:t.shippingSettingsId+t.shippingZoneRateId,label:t.rateName,isSelected:r.checkout.shippingSettingsId===t.shippingSettingsId&&r.checkout.shippingZoneRateId===t.shippingZoneRateId,rightContent:e.createElement("div",{className:n.ShippingPrice},0===t.price?a("checkout-page:free"):c(t.price,r.checkout.currencyCode,r.checkout.currencySymbol)),onClick:function(){return r.onShippingMethodChange(t)}})})))})),g=t((function(t){var i=t.vm,s=o().t,p=e.useCallback((function(e){i.checkout.isGiftPackage=e}),[i]),u=e.useCallback((function(e){i.checkout.giftPackageNote=e}),[i,i.checkout]),l=e.useMemo((function(){var e;return null===(e=i.checkoutSettings.giftPackagePriceList)||void 0===e?void 0:e.find((function(e){return e.currencyCode===i.checkout.currencyCode}))}),[i,i.checkoutSettings,i.checkout]),g=s("checkout-page:giftPackageCta")+(l&&l.price?" (+ ".concat(c(l.price,l.currencyCode,l.currencySymbol),")"):"");return i.checkoutSettings.isGiftPackageEnabled?e.createElement("div",{className:n.GiftSection},e.createElement(r,{value:i.checkout.isGiftPackage||!1,label:g,onChange:p,removePadding:!0}),i.checkout.isGiftPackage&&e.createElement(m,{type:a.TEXT_AREA,label:"",value:i.checkout.giftPackageNote||"",onChange:u,style:{marginTop:"16px"},textAreaPlaceholder:s("checkout-page:giftPackageCtaPlaceholder")})):null}));export{u as CheckoutStepShipping};
