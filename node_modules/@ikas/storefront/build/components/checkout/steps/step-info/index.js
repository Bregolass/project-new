import*as e from"react";import{observer as t}from"mobx-react-lite";import{FormItem as o}from"../../components/form-item/index.js";import{FormItemType as i,FormItemInputMode as r}from"../../components/form-item/model.js";import{Button as n}from"../../components/button/index.js";import{Checkbox as c}from"../../components/checkbox/index.js";import m from"../../components/error/index.js";import s from"../../styles/common.module.scss.js";import a from"../../components/customer-addresses/index.js";import l from"../../components/customer-addresses/model.js";import"@ikas/storefront-config";import{useTranslation as u}from"../../../../utils/i18n.js";var p=t((function(t){var p,d,h=t.vm,g=u().t,f=e.useCallback((function(e){h.checkout.customer&&(h.checkout.customer.email=e?e.trim():e)}),[h,h.checkout,h.checkout.customer]),k=e.useMemo((function(){return h.isDigitalOnly?new l(h,"billing"):new l(h,"shipping")}),[h]);return e.createElement("div",null,e.createElement(m,{vm:h}),!h.checkout.hasCustomer&&e.createElement("div",{style:{marginTop:"8px",marginBottom:"40px"}},e.createElement("div",{className:s.FormSectionTitle},e.createElement("div",{className:s.Title},g("checkout-page:contactInfo"))),e.createElement(o,{type:i.TEXT,inputMode:r.EMAIL,label:g("checkout-page:email"),autocomplete:"email",value:(null===(p=h.checkout.customer)||void 0===p?void 0:p.email)||"",onChange:f,hasError:h.isErrorsVisible&&!h.checkout.hasValidCustomerEmail,errorText:g("checkout-page:emailError"),tooltipText:g("checkout-page:guestEmailTooltip")}),e.createElement(c,{value:(null===(d=h.checkout.customer)||void 0===d?void 0:d.notificationsAccepted)||!1,label:g("checkout-page:customerConsentCta"),onChange:h.setCustomerConsentGranted})),e.createElement(a,{vm:k}),!k.editingCustomerAddress&&e.createElement(n,{style:{width:"100%",marginTop:h.store.customerStore.customer?"0px":"32px"},text:"address"!==h.deliveryMethod||h.isDigitalOnly?g("checkout-page:actions.continueWithPayment"):g("checkout-page:actions.continueWithShipping"),isLoading:h.isStepLoading,onClick:h.isDigitalOnly?h.onProceedToDigitalOnlyPaymentClick:h.onProceedToShippingClick}))}));export{p as default};
