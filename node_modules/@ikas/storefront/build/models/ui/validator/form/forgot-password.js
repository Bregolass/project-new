import{__awaiter as e,__generator as r}from'./../../../../ext/tslib/tslib.es6.js';import{makeObservable as t,computed as i,observable as o,action as a}from"mobx";import{Validator as s}from"../index.js";import{IkasBaseStore as n}from"../../../../store/base.js";import"../../../../store/customer/index.js";import"../../../../store/cart/index.js";import{RequiredRule as l,EmailRule as m}from"../rules/index.js";var u=function(){function u(e){var r=this;this.model={email:""},this.onEmailChange=function(e){r.email=e},t(this,{emailErrorMessage:i,hasValidatorError:i,redirect:i,email:i,model:o,validateAll:a,submit:a}),this.validator=new s(this.model,[new l({fieldKey:"email",valuePath:"email",message:e.message.requiredRule}),new m({fieldKey:"email",valuePath:"email",message:e.message.emailRule})])}return Object.defineProperty(u.prototype,"email",{get:function(){return this.model.email},set:function(e){this.model.email=e},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"hasValidatorError",{get:function(){return this.validator.hasError},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"emailErrorMessage",{get:function(){return this.validator.results.email.errorMessage},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"redirect",{get:function(){if("undefined"!=typeof window)return new URLSearchParams(window.location.search).get("redirect")},enumerable:!1,configurable:!0}),u.prototype.validateAll=function(){return this.validator.validateAll()},u.prototype.submit=function(){return e(this,void 0,void 0,(function(){var e;return r(this,(function(r){switch(r.label){case 0:return e={isFormError:!1,isSuccess:!1},[4,this.validateAll()];case 1:if(r.sent())return e.isFormError=!0,[2,e];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,n.getInstance().customerStore.forgotPassword(this.model.email)];case 3:return r.sent()&&(e.isSuccess=!0),[2,e];case 4:return r.sent(),[2,e];case 5:return[2]}}))}))},u}();export{u as ForgotPasswordForm};
