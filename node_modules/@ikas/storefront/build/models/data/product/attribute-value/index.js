import{__awaiter as t,__generator as r}from'./../../../../ext/tslib/tslib.es6.js';import{IkasImage as e}from"../../image/index.js";import{IkasProductAttribute as i}from"../attribute/index.js";import{IkasProductAttributeOption as u}from"../attribute/option/index.js";import{IkasProductAttributeType as o}from"@ikas/storefront-models";import{makeAutoObservable as n}from"mobx";import{IkasProductAttributeValueFunctions as s}from"@ikas/storefront-model-functions";import d from"../../../../store/product/index.js";var l=function(){function l(t){var r;this.imageIds=null,this.productAttributeId=null,this.productAttributeOptionId=null,this.value=null,this.productAttribute=null,this.productAttributeOption=null,this.imageIds=t.imageIds,this.productAttributeId=t.productAttributeId,this.productAttributeOptionId=t.productAttributeOptionId,this.value=t.value||null,this.images=null===(r=t.images)||void 0===r?void 0:r.map((function(t){return new e(t)})),this.productAttribute=t.productAttribute?new i(t.productAttribute):null,this.productAttributeOption=t.productAttributeOption?new u(t.productAttributeOption):null,n(this)}return Object.defineProperty(l.prototype,"tableValue",{get:function(){return s.getTableValue(this.value)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"productIds",{get:function(){var t;if((null===(t=this.productAttribute)||void 0===t?void 0:t.type)!==o.PRODUCT||!this.value)return[];try{return JSON.parse(this.value)}catch(t){return console.error(t),[]}},enumerable:!1,configurable:!0}),l.prototype.getProducts=function(){var e,i;return t(this,void 0,void 0,(function(){var t,u;return r(this,(function(r){switch(r.label){case 0:if((null===(e=this.productAttribute)||void 0===e?void 0:e.type)!==o.PRODUCT||!this.value)return[2,[]];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,d.searchProducts({input:{productIdList:this.productIds}})];case 2:return t=r.sent(),[2,(null===(i=t.data)||void 0===i?void 0:i.data)||[]];case 3:return u=r.sent(),console.error(u),[2,[]];case 4:return[2]}}))}))},l}(),a=function(t){this.colId=t.colId,this.rowId=t.rowId,this.value=t.value},p=function(t){this.attribute=t.attribute,this.values=t.values.map((function(t){return new l(t)}))};export{a as IkasAttributeTableCellValue,p as IkasProductAttributeMap,l as IkasProductAttributeValue};
