import{__extends as e,__assign as t}from'./../../../ext/tslib/tslib.es6.js';import{IkasCart as r}from"../cart/index.js";import{IkasCheckoutFunctions as i,IkasOrderFunctions as a}from"@ikas/storefront-model-functions";import{formatCurrency as n}from"../../../utils/currency.js";import{makeObservable as o,observable as l,computed as s}from"mobx";import{formatDate as d}from"../../../utils/helper.js";import c from"../order/address/ikas-localized-order-address.js";var u=function(r){function u(e,i){var a=r.call(this,e,!0)||this;return a.appliedCouponCode=null,a.selectedPaymentGateway=null,a.masterPassPaymentGateway=null,a.billingAddress=null,a.shippingAddress=null,a.appliedCouponCode=e.couponCode,a.selectedPaymentGateway=e.selectedPaymentGateway,a.masterPassPaymentGateway=e.masterPassPaymentGateway,a.billingAddress=e.billingAddress?new c(t({countrySettings:i},e.billingAddress)):null,a.shippingAddress=e.shippingAddress?new c(t({countrySettings:i},e.shippingAddress)):null,o(a,{appliedCouponCode:l,selectedPaymentGateway:l,masterPassPaymentGateway:l,billingAddress:l,shippingAddress:l,isComplete:s,$totalFinalPrice:s,$totalFinalPriceTaxModifier:s,$totalTax:s,$formattedTotalTax:s,$formattedTotalFinalPrice:s}),a}return e(u,r),Object.defineProperty(u.prototype,"isComplete",{get:function(){return i.isComplete(this)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"$totalFinalPrice",{get:function(){return this.selectedPaymentGateway?i.getTotalFinalPrice(this,this.selectedPaymentGateway):this.totalFinalPrice},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"$totalFinalPriceTaxModifier",{get:function(){return this.$totalFinalPrice/this.totalFinalPrice},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"$totalTax",{get:function(){return a.getTotalTax(this)*this.$totalFinalPriceTaxModifier},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"$formattedTotalTax",{get:function(){return n(this.$totalTax,this.currencyCode,this.currencySymbol||"")},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"$formattedTotalFinalPrice",{get:function(){return n(this.$totalFinalPrice,this.currencyCode,this.currencySymbol)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"dateStr",{get:function(){var e=new Date;return e.setTime(this.updatedAt),d(e)},enumerable:!1,configurable:!0}),u}(r);export{u as IkasCheckout};
