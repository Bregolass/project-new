import{__extends as t}from'./../../../../ext/tslib/tslib.es6.js';export{IkasOrderLineItemStatus}from"@ikas/storefront-models";import{IkasOrderLineDiscount as e}from"./discount/index.js";import{IkasOrderLineVariant as i}from"./variant/index.js";import{IkasOrderLineItemOption as r}from"./option/index.js";import{IkasBaseModel as n}from"../../base/index.js";import{makeObservable as o,observable as u,computed as c}from"mobx";import{IkasOrderLineItemFunctions as a}from"@ikas/storefront-model-functions";import{formatCurrency as l}from"../../../../utils/currency.js";var d=function(n){function d(t){var a,l,d,s,f,y=this;return(y=n.call(this,t)||this).currencyCode=null,y.discount=null,y.discountPrice=null,y.finalPrice=null,y.options=null,y.originalOrderLineItemId=null,y.statusUpdatedAt=null,y.stockLocationId=null,y.taxValue=null,y._refundQuantity=null,y.currencyCode=t.currencyCode||null,y.currencySymbol=t.currencySymbol||null,y.discount=t.discount?new e(t.discount):null,y.discountPrice=null!==(a=t.discountPrice)&&void 0!==a?a:null,y.finalPrice=null!==(l=t.finalPrice)&&void 0!==l?l:null,y.finalUnitPrice=null!==(d=t.finalUnitPrice)&&void 0!==d?d:null,y.options=(null===(s=t.options)||void 0===s?void 0:s.map((function(t){return new r(t)})))||null,y.originalOrderLineItemId=t.originalOrderLineItemId||null,y.price=t.price,y.quantity=t.quantity,y.status=t.status,y.statusUpdatedAt=t.statusUpdatedAt,y.stockLocationId=t.stockLocationId,y.taxValue=t.taxValue,y.unitPrice=null!==(f=t.unitPrice)&&void 0!==f?f:null,y.variant=new i(t.variant),y.orderedAt=t.orderedAt,y.refundQuantity=t.refundQuantity,o(y,{currencyCode:u,currencySymbol:u,discount:u,discountPrice:u,finalPrice:u,finalUnitPrice:u,options:u,originalOrderLineItemId:u,price:u,quantity:u,status:u,statusUpdatedAt:u,stockLocationId:u,taxValue:u,unitPrice:u,variant:u,orderedAt:u,_refundQuantity:u,priceWithQuantity:c,formattedPriceWithQuantity:c,overridenPriceWithQuantity:c,formattedOverridenPriceWithQuantity:c,formattedFinalPrice:c,formattedUnitPrice:c,formattedFinalUnitPrice:c,formattedDiscountPrice:c,finalPriceWithQuantity:c,formattedFinalPriceWithQuantity:c,tax:c,formattedTax:c,refundQuantity:c}),y}return t(d,n),Object.defineProperty(d.prototype,"priceWithQuantity",{get:function(){return a.getPriceWithQuantity(this)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"formattedPriceWithQuantity",{get:function(){return l(this.priceWithQuantity,this.currencyCode||"",this.currencySymbol||"")},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"overridenPriceWithQuantity",{get:function(){return a.getOverridenPriceWithQuantity(this)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"formattedOverridenPriceWithQuantity",{get:function(){return l(this.overridenPriceWithQuantity||0,this.currencyCode||"",this.currencySymbol||"")},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"formattedFinalPrice",{get:function(){return l(this.finalPrice||0,this.currencyCode||"",this.currencySymbol||"")},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"formattedUnitPrice",{get:function(){return l(this.unitPrice||0,this.currencyCode||"",this.currencySymbol||"")},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"formattedFinalUnitPrice",{get:function(){return l(this.finalUnitPrice||0,this.currencyCode||"",this.currencySymbol||"")},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"unitPriceText",{get:function(){var t,e,i;if(null!==this.finalUnitPrice)return"".concat(l(this.finalUnitPrice,this.currencyCode||"",this.currencySymbol||"")," / ").concat((null===(e=null===(t=this.variant.baseUnit)||void 0===t?void 0:t.unit)||void 0===e?void 0:e.name)||(null===(i=this.variant.baseUnit)||void 0===i?void 0:i.type))},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"formattedDiscountPrice",{get:function(){return l(this.discountPrice||0,this.currencyCode||"",this.currencySymbol||"")},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"finalPriceWithQuantity",{get:function(){return a.getFinalPriceWithQuantity(this)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"formattedFinalPriceWithQuantity",{get:function(){return l(this.finalPriceWithQuantity||0,this.currencyCode||"",this.currencySymbol||"")},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"tax",{get:function(){return a.getTax(this)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"formattedTax",{get:function(){return l(this.tax,this.currencyCode||"",this.currencySymbol||"")},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"hasDiscount",{get:function(){return a.hasDiscount(this)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"refundQuantity",{get:function(){return this._refundQuantity},set:function(t){t?(t>this.quantity&&(t=this.quantity),t<=0&&(t=null),this._refundQuantity=t):this._refundQuantity=null},enumerable:!1,configurable:!0}),d}(n);export{d as IkasOrderLineItem};
