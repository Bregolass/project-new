"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r,e=require('../ext/@redtea/format-axios-error/index.mjs.js');exports.APIErrorCode=void 0,(r=exports.APIErrorCode||(exports.APIErrorCode={})).ARGUMENT_VALIDATION_ERROR="ARGUMENT_VALIDATION_ERROR",r.UNAUTHENTICATED="UNAUTHENTICATED",r.UNAUTHORIZED="UNAUTHORIZED",r.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",r.LOGIN_REQUIRED="LOGIN_REQUIRED",r.NETWORK_ERROR="NETWORK_ERROR",r.DUPLICATE_KEY_ERROR="DUPLICATE_KEY_ERROR",r.UNKNOWN="UNKNOWN";var o=function(){function r(r,e){this.errors=[],this.errorCodes=[];var o=[],t=[];null==e||e.forEach((function(r){var e;(null===(e=r.extensions)||void 0===e?void 0:e.code)?(o.push(r.message),t.push(r.extensions.code)):(o.push("Unknown error"),t.push(exports.APIErrorCode.UNKNOWN))})),this.graphQLErrors=e,this.errors=o,this.errorCodes=t,this.data=r}return Object.defineProperty(r.prototype,"firstErrorMessage",{get:function(){return this.errors.length?this.errors[0]:""},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isUnAuthenticated",{get:function(){return this.errorCodes.some((function(r){return r===exports.APIErrorCode.UNAUTHENTICATED}))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNetworkError",{get:function(){return this.errorCodes.some((function(r){return r===exports.APIErrorCode.NETWORK_ERROR}))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSuccess",{get:function(){return 0===this.errorCodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isRecoverableError",{get:function(){var r=[exports.APIErrorCode.UNAUTHENTICATED,exports.APIErrorCode.INTERNAL_SERVER_ERROR,exports.APIErrorCode.NETWORK_ERROR];return this.errorCodes.every((function(e){return r.includes(e)}))},enumerable:!1,configurable:!0}),r.networkError=function(){var e=new r;return e.errors.push("Network error!"),e.errorCodes.push(exports.APIErrorCode.NETWORK_ERROR),e},r.unknownError=function(){var e=new r;return e.errors.push("Unknown error!"),e.errorCodes.push(exports.APIErrorCode.UNKNOWN),e},r.authError=function(){var e=new r;return e.errors.push("Authentication error!"),e.errorCodes.push(exports.APIErrorCode.UNAUTHENTICATED),e},r.success=function(){return new r},r}();exports.APIResponse=o,exports.handleAPIError=function(r){try{console.log(JSON.stringify(e.format(r),null,2))}catch(e){console.error(r)}return r.networkError?o.networkError():r.graphQLErrors?new o(void 0,r.graphQLErrors):o.unknownError()};
